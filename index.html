
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>OmniBOLT API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;,&quot;golang&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="golang">golang</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#omnibolt-daemon-websocket-messages-reference" class="toc-h1 toc-link" data-title="OmniBOLT Daemon Websocket Messages Reference">OmniBOLT Daemon Websocket Messages Reference</a>
          </li>
          <li>
            <a href="#wallet-preparation" class="toc-h1 toc-link" data-title="Wallet Preparation">Wallet Preparation</a>
          </li>
          <li>
            <a href="#balance-and-unspent" class="toc-h1 toc-link" data-title="Balance and Unspent">Balance and Unspent</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-balances-for-address" class="toc-h2 toc-link" data-title="get all balances for address">get all balances for address</a>
                  </li>
                  <li>
                    <a href="#list-unspent" class="toc-h2 toc-link" data-title="list unspent">list unspent</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#user-login" class="toc-h1 toc-link" data-title="User Login">User Login</a>
          </li>
          <li>
            <a href="#create-channel" class="toc-h1 toc-link" data-title="create channel">create channel</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#request-to-create" class="toc-h2 toc-link" data-title="request to create">request to create</a>
                  </li>
                  <li>
                    <a href="#response-to-agree" class="toc-h2 toc-link" data-title="Response to agree">Response to agree</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#deposit-btc-for-miner-fee" class="toc-h1 toc-link" data-title="Deposit BTC for miner fee">Deposit BTC for miner fee</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#funder-create-funding-transaction" class="toc-h2 toc-link" data-title="funder create funding transaction">funder create funding transaction</a>
                  </li>
                  <li>
                    <a href="#funder-notifies-fundee" class="toc-h2 toc-link" data-title="funder notifies fundee">funder notifies fundee</a>
                  </li>
                  <li>
                    <a href="#fundee-replies" class="toc-h2 toc-link" data-title="fundee replies">fundee replies</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#deposit-omni-assets" class="toc-h1 toc-link" data-title="Deposit Omni Assets">Deposit Omni Assets</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#funder-creates-token-funding-transaction" class="toc-h2 toc-link" data-title="funder creates token funding transaction">funder creates token funding transaction</a>
                  </li>
                  <li>
                    <a href="#funder-notifies-fundee-the-token-funding-is-created" class="toc-h2 toc-link" data-title="funder notifies fundee the token funding is created">funder notifies fundee the token funding is created</a>
                  </li>
                  <li>
                    <a href="#fundee-replies-knowing-the-token-has-been-funded" class="toc-h2 toc-link" data-title="fundee replies knowing the token has been funded">fundee replies knowing the token has been funded</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#payments-in-channel" class="toc-h1 toc-link" data-title="Payments in Channel">Payments in Channel</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#sender-creates-a-commitment-transaction-to-pay" class="toc-h2 toc-link" data-title="sender creates a commitment transaction to pay">sender creates a commitment transaction to pay</a>
                  </li>
                  <li>
                    <a href="#receiever-accepts-the-tokens" class="toc-h2 toc-link" data-title="Receiever accepts the tokens">Receiever accepts the tokens</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#htlc-in-obd" class="toc-h1 toc-link" data-title="HTLC in OBD">HTLC in OBD</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#prepare-data-for-client" class="toc-h2 toc-link" data-title="Prepare Data for Client">Prepare Data for Client</a>
                  </li>
                  <li>
                    <a href="#prepare-data-for-channel-address" class="toc-h2 toc-link" data-title="Prepare Data for Channel Address">Prepare Data for Channel Address</a>
                  </li>
                  <li>
                    <a href="#login" class="toc-h2 toc-link" data-title="Login">Login</a>
                  </li>
                  <li>
                    <a href="#open-channel-between-alice-and-bob-a2b" class="toc-h2 toc-link" data-title="Open Channel between Alice and Bob（A2B）">Open Channel between Alice and Bob（A2B）</a>
                  </li>
                  <li>
                    <a href="#open-channel-between-bob-and-carol-b2c" class="toc-h2 toc-link" data-title="Open Channel between Bob and Carol（B2C）">Open Channel between Bob and Carol（B2C）</a>
                  </li>
                  <li>
                    <a href="#alice-deposit-btc-to-channel-a2b-for-miner-fee" class="toc-h2 toc-link" data-title="Alice deposit BTC to channel A2B for miner fee">Alice deposit BTC to channel A2B for miner fee</a>
                  </li>
                  <li>
                    <a href="#alice-deposit-usdt-to-channel-a2b-for-transfer" class="toc-h2 toc-link" data-title="Alice deposit USDT to channel A2B for transfer">Alice deposit USDT to channel A2B for transfer</a>
                  </li>
                  <li>
                    <a href="#bob-deposit-btc-to-channel-b2c-for-miner-fee" class="toc-h2 toc-link" data-title="Bob deposit BTC to channel B2C for miner fee">Bob deposit BTC to channel B2C for miner fee</a>
                  </li>
                  <li>
                    <a href="#bob-deposit-usdt-to-channel-b2c-for-transfer" class="toc-h2 toc-link" data-title="Bob deposit USDT to channel B2C for transfer">Bob deposit USDT to channel B2C for transfer</a>
                  </li>
                  <li>
                    <a href="#create-rsmc-commitment-transaction-between-alice-and-bob" class="toc-h2 toc-link" data-title="Create RSMC Commitment Transaction between Alice and Bob">Create RSMC Commitment Transaction between Alice and Bob</a>
                  </li>
                  <li>
                    <a href="#launch-a-htlc" class="toc-h2 toc-link" data-title="Launch a HTLC">Launch a HTLC</a>
                  </li>
                  <li>
                    <a href="#alice-looking-for-a-path-to-transfer-to-carol-and-send-h-to-bob" class="toc-h2 toc-link" data-title="Alice looking for a path to transfer to Carol and Send H to Bob">Alice looking for a path to transfer to Carol and Send H to Bob</a>
                  </li>
                  <li>
                    <a href="#bob-send-h-to-carol-through-the-path" class="toc-h2 toc-link" data-title="Bob Send H to Carol through the Path">Bob Send H to Carol through the Path</a>
                  </li>
                  <li>
                    <a href="#carol-send-r-to-bob-through-the-path" class="toc-h2 toc-link" data-title="Carol Send R to Bob through the Path">Carol Send R to Bob through the Path</a>
                  </li>
                  <li>
                    <a href="#bob-send-r-to-alice-through-the-path" class="toc-h2 toc-link" data-title="Bob Send R to Alice through the Path">Bob Send R to Alice through the Path</a>
                  </li>
                  <li>
                    <a href="#close-htlc" class="toc-h2 toc-link" data-title="Close HTLC">Close HTLC</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#query" class="toc-h1 toc-link" data-title="Query">Query</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#query-list-of-commitment-transactions" class="toc-h2 toc-link" data-title="Query list of commitment transactions">Query list of commitment transactions</a>
                  </li>
                  <li>
                    <a href="#latest-commitment-transaction" class="toc-h2 toc-link" data-title="Latest commitment transaction">Latest commitment transaction</a>
                  </li>
                  <li>
                    <a href="#latest-revockable-delivery-transaction" class="toc-h2 toc-link" data-title="Latest Revockable Delivery Transaction">Latest Revockable Delivery Transaction</a>
                  </li>
                  <li>
                    <a href="#latest-breach-remedy-transaction" class="toc-h2 toc-link" data-title="Latest Breach Remedy Transaction">Latest Breach Remedy Transaction</a>
                  </li>
                  <li>
                    <a href="#list-all-revockable-delivery-transactions" class="toc-h2 toc-link" data-title="List all Revockable Delivery Transactions">List all Revockable Delivery Transactions</a>
                  </li>
                  <li>
                    <a href="#list-all-breach-remedy-transactions" class="toc-h2 toc-link" data-title="List all Breach Remedy Transactions">List all Breach Remedy Transactions</a>
                  </li>
                  <li>
                    <a href="#list-all-channels" class="toc-h2 toc-link" data-title="List all Channels">List all Channels</a>
                  </li>
                  <li>
                    <a href="#list-all-commitment-transactions-broadcasted" class="toc-h2 toc-link" data-title="List all Commitment Transactions Broadcasted">List all Commitment Transactions Broadcasted</a>
                  </li>
                  <li>
                    <a href="#list-all-commitment-transactions-broadcasted-2" class="toc-h2 toc-link" data-title="List all Commitment Transactions Broadcasted">List all Commitment Transactions Broadcasted</a>
                  </li>
                  <li>
                    <a href="#get-htlc-base-data-and-the-h-hash_preimage_r" class="toc-h2 toc-link" data-title="Get HTLC base data and the H (Hash_Preimage_R)">Get HTLC base data and the H (Hash_Preimage_R)</a>
                  </li>
                  <li>
                    <a href="#get-htlc-base-data-and-the-r-preimage_r" class="toc-h2 toc-link" data-title="Get HTLC base data and the R (Preimage_R)">Get HTLC base data and the R (Preimage_R)</a>
                  </li>
                  <li>
                    <a href="#the-middleman-node-get-the-r-preimage_r-by-channel-id" class="toc-h2 toc-link" data-title="The middleman node get the R (Preimage_R) by channel id">The middleman node get the R (Preimage_R) by channel id</a>
                  </li>
                  <li>
                    <a href="#htlc-receiever-get-the-r-by-h" class="toc-h2 toc-link" data-title="HTLC Receiever get the R by H">HTLC Receiever get the R by H</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://github.com/LightningOnOmnilayer/LightningOnOmni'>Join our dev community</a></li>
            <li><a href='https://github.com/LightningOnOmnilayer/Omni-BOLT-spec'>Help in OmniBOLT specification</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='omnibolt-daemon-websocket-messages-reference'>OmniBOLT Daemon Websocket Messages Reference</h1>
<p>Welcome to the Websocket API reference documentation for OmniBOLT Daemon (OBD), the daemon that communicates with light clients written in any program languages that support websocket connection, such as javascript, golang, shell or even C/C++. OBD runs as an independent process connecting to a full node of OmniCore(version 0.18), which provides the complete services of token transactions on bitcoin network. And current OBD implementation is deeply binded to OmniCore. </p>

<p>We assume you have already gone through our <a href="https://github.com/LightningOnOmnilayer/LightningOnOmni#installation">installation instruction</a>, so that you are familar with:</p>

<ul>
<li>Pulling source code and compile to get obdserver;<br></li>
<li>Configuring OmniCore node for OBD;<br></li>
<li>Connecting OBD with Omnicore correctly;<br></li>
<li>Using a simple web based <a href="https://chrome.google.com/webstore/detail/websocket-test-client/fgponpodhbmadfljofbimhhlengambbn?hl=en">websocket client</a> for Chrome to do experiments;<br></li>
<li>OBD responses you correctly;<br></li>
</ul>

<p>For kernel developers in our community, the above steps are the easiest way to get started. Just open <a href="https://github.com/LightningOnOmnilayer/LightningOnOmni#step-4-test-channel-operations-using-websocket-testing-tool">LightningOnOmni</a> project with your favorit golang editor, run OBD in debug mode, setup break points, and send messages from your websocket-test-client. You may intercept the messages and track message flows of OBD kernel.</p>
<h1 id='wallet-preparation'>Wallet Preparation</h1>
<blockquote>
<p>To test and debug the kernel, use OmniCore in REGTEST mode, and creat two users Alice and Bob:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># With shell, you can creat your addresses using omnicore-cli</span>
Alice: mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs  
<span class="s2">"pubkey"</span>: <span class="s2">"021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d"</span>  
<span class="s2">"privatekey"</span>: <span class="s2">"cUAdadTkjeVFsNz5ifhkETfAzk5PvhnLWtmdSKgbyTTjSCE4MYWy"</span>  

Bob: myHRPQWTQ1yYbj7vr7raBW59CTeAFEsUXY  
<span class="s2">"pubkey"</span>: <span class="s2">"03efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce9"</span>  
<span class="s2">"privatekey"</span>:   cV6dif91LHD8Czk8BTgvYZR3ipUrqyMDMtUXSWsThqpHaQJUuHKA  

channel:  
<span class="o">(</span>P2WHK<span class="o">)</span>address: 2N1DFjaE4yCcECdFwgLQcLmNrLV5zetgQtE  
<span class="s2">"channel_address_redeem_script"</span>:<span class="s2">"5221021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d2103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952ae"</span>  
<span class="s2">"channel_address_script_pub_key"</span>:<span class="s2">"a9145761a1d45b8a6e7caa10a4bcecca97630c67af4687"</span>  

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">To</span> <span class="nx">be</span> <span class="nx">added</span>
</code></pre>
<blockquote>
<p>Make sure to replace pubkey and privatekey of <code>Alice/Bob</code> with values you create in your environment.</p>
</blockquote>

<p>Use omnicore-cli to creat new users in REGTEST mode, and deposit tokens to their addresses respectively. Don&#39;t develop in real BTC network. A good start is <a href="https://github.com/OmniLayer/omnicore/wiki/Use-the-raw-transaction-API-to-create-a-Simple-Send-transaction">Use the raw transaction API to create a Simple Send transaction</a>  </p>

<aside class="notice">
After you created your users and their addresses, you shall replace <code>Alice</code> and <code>Bob</code> with your data.
</aside>
<h1 id='balance-and-unspent'>Balance and Unspent</h1><h2 id='get-all-balances-for-address'>get all balances for address</h2>
<!-- right -->

<blockquote>
<p>Here we use the example data created before. Alice: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code>./omnicore-cli omni_getallbalancesforaddress mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs  

</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">  
    </span><span class="s2">"propertyid"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="p">,</span><span class="w">  
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OST-P1-Test"</span><span class="p">,</span><span class="w">  
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00000000"</span><span class="p">,</span><span class="w">  
    </span><span class="s2">"reserved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">  
    </span><span class="s2">"frozen"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000000"</span><span class="w">  
</span><span class="p">}</span><span class="w">  
</span></code></pre>
<blockquote>
<p>Bob: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code>./omnicore-cli omni_getallbalancesforaddress myHRPQWTQ1yYbj7vr7raBW59CTeAFEsUXY  

</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">  
    </span><span class="s2">"propertyid"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OST-P1-Test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.00000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reserved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frozen"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000000"</span><span class="w">
</span><span class="p">}</span><span class="w">  
</span></code></pre>
<!-- center -->

<p><code>./omnicore-cli omni_getallbalancesforaddress &lt;omni address&gt;</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>omni address</td>
<td>N/A</td>
<td>Address created by omnicore-cli, same to the bitcoin core addresss.</td>
</tr>
</tbody></table>
<h2 id='list-unspent'>list unspent</h2>
<!-- right -->

<blockquote>
<p>Alice:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>./omnicore-cli listunspent 0 999999  <span class="s1">'["mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs"]'</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b57afc6164f68f2c3b79d31afb30bd1750b22798ec6cfad0131a3062c2317ec7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"scriptPubKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76a914b5770ba3d6d34f5fdd8d582f81fb383975bb9c6d88ac"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01000000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"spendable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"solvable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>./omnicore-cli listunspent 0 999999  <span class="s1">'["myHRPQWTQ1yYbj7vr7raBW59CTeAFEsUXY"]'</span>
</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4a018fca34428ba622c9d105faba954e045dd977b61e52269b05d1cc5b8fc9f9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"myHRPQWTQ1yYbj7vr7raBW59CTeAFEsUXY"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"scriptPubKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76a914c2e30e5f058df787de0529e0742d7ef7a13231ab88ac"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00070467</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">383</span><span class="p">,</span><span class="w">
    </span><span class="s2">"spendable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"solvable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><code>./omnicore-cli listunspent 0 999999  &#39;[&quot;&lt;omni address&gt;&quot;]&#39;</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>omni address</td>
<td>N/A</td>
<td>Address created by omnicore-cli, same to the bitcoin core addresss.</td>
</tr>
</tbody></table>

<aside class="success">
Now, we have our environment ready. Let's start to communicate with OBD!
</aside>
<h1 id='user-login'>User Login</h1>
<!-- right -->

<blockquote>
<p>Alice request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>:1,
    <span class="s2">"data"</span>:<span class="o">{</span>
            <span class="s2">"peer_id"</span>:<span class="s2">"alice"</span>
            <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"all"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"alice login"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>:1,
    <span class="s2">"data"</span>:<span class="o">{</span>
            <span class="s2">"peer_id"</span>:<span class="s2">"bob"</span>
            <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"all"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"bob login"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>This endpoint manages users created by an OBD instance. Here we use Alice and Bob for testing purpose. The complete hirarchecal deterministic wallet system will be integrated soon, functions being including but not limited to: generat user mnemonic words, public/private key paires, PIN code, restore account.</p>

<p><strong>Message Type: 1</strong></p>

<p><strong>Websocket Request:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>peer_iD</td>
<td>-------</td>
<td>data</td>
<td>Global peer ID for a user in OBD network</td>
</tr>
</tbody></table>

<p><strong>Websocket Response：</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>Global peer ID for a user in OBD network</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>to whom should know the login of this peer</td>
</tr>
<tr>
<td>result</td>
<td>-------</td>
<td>body</td>
<td>response data from OBD</td>
</tr>
</tbody></table>

<aside class="warning">This is not ready for production environment, only for test. The complete set of wallet functions are on our schedule.</aside>
<h1 id='create-channel'>create channel</h1><h2 id='request-to-create'>request to create</h2>
<!-- right -->

<blockquote>
<p>Alice requests:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
        <span class="s2">"type"</span>:-32,
            <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"funding_pubkey"</span>:<span class="s2">"021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d"</span>
            <span class="o">}</span>,
    <span class="s2">"recipient_peer_id"</span>:<span class="s2">"bob"</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-32</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"chain_hash"</span><span class="p">:</span><span class="s2">"1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_reserve_satoshis"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"delayed_payment_base_point"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dust_limit_satoshis"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fee_rate_per_kw"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding_address"</span><span class="p">:</span><span class="s2">"mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding_pubkey"</span><span class="p">:</span><span class="s2">"021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding_satoshis"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"htlc_base_point"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"htlc_minimum_msat"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"max_accepted_htlcs"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"max_htlc_value_in_flight_msat"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"payment_base_point"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"push_msat"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"revocation_base_point"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">43</span><span class="p">,</span><span class="mi">207</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">133</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">214</span><span class="p">,</span><span class="mi">91</span><span class="p">,</span><span class="mi">184</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">209</span><span class="p">,</span><span class="mi">133</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">147</span><span class="p">,</span><span class="mi">178</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">245</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">207</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">105</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">183</span><span class="p">],</span><span class="w">
        </span><span class="s2">"to_self_delay"</span><span class="p">:</span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>Alice sends request to her OBD instance, her OBD helps her complete the message, and routes her request to Bob&#39;s OBD for creating a channel between them. </p>

<p><strong>Message Type: -32</strong></p>

<p><strong>Alice Request</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>funding pubkey</td>
<td>-------</td>
<td>data</td>
<td>public key of funder, who wish to deposite BTC and other tokens to the channel</td>
</tr>
<tr>
<td>recipient_peer_id</td>
<td>-------</td>
<td>body</td>
<td>peer id of the fundee.</td>
</tr>
</tbody></table>

<p><strong>OBD Response：</strong><br>
This response is simutanously sent to Bob&#39;s OBD.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>chain_hash</td>
<td>1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P</td>
<td>result</td>
<td>identify the public chain. Default is OmniLayer</td>
</tr>
<tr>
<td>channel_reserve_satoshis</td>
<td>-------</td>
<td>result</td>
<td>reserved satoshis in the channel</td>
</tr>
<tr>
<td>delayed_payment_base_point</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>dust_limit_satoshis</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>fee_rate_per_kw</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_address</td>
<td>-------</td>
<td>result</td>
<td>Funder&#39;s address from where he send money to the channel</td>
</tr>
<tr>
<td>funding_pubkey</td>
<td>-------</td>
<td>result</td>
<td>public key of funder, who wish to deposite BTC and other tokens to the channel</td>
</tr>
<tr>
<td>funding_satoshis</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>htlc_base_point</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>htlc_minimum_msat</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>max_accepted_htlcs</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>max_htlc_value_in_flight_msat</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>payment_base_point</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>push_msat</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>revocation_base_point</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>to_self_delay</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>
<h2 id='response-to-agree'>Response to agree</h2>
<!-- right -->

<blockquote>
<p>Bob replies to accept:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>:-33,
    <span class="s2">"data"</span>:<span class="o">{</span>
            <span class="s2">"temporary_channel_id"</span>:[43,207,125,166,133,84,214,91,184,177,149,10,111,209,133,201,147,178,48,245,6,18,162,239,207,45,105,158,251,200,138,183],
        <span class="s2">"funding_pubkey"</span>:<span class="s2">"03efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce9"</span>,
            <span class="s2">"approval"</span>:true
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-33</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"accept_at"</span><span class="p">:</span><span class="s2">"2019-09-21T00:06:48.634265+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"address_a"</span><span class="p">:</span><span class="s2">"mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"address_b"</span><span class="p">:</span><span class="s2">"myHRPQWTQ1yYbj7vr7raBW59CTeAFEsUXY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"chain_hash"</span><span class="p">:</span><span class="s2">"1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address"</span><span class="p">:</span><span class="s2">"2N1DFjaE4yCcECdFwgLQcLmNrLV5zetgQtE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_redeem_script"</span><span class="p">:</span><span class="s2">"5221021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d2103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952ae"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_script_pub_key"</span><span class="p">:</span><span class="s2">"a9145761a1d45b8a6e7caa10a4bcecca97630c67af4687"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="w">
        </span><span class="s2">"channel_reserve_satoshis"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"close_at"</span><span class="p">:</span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="s2">"2019-09-21T00:05:25.667117+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="s2">"delayed_payment_base_point"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dust_limit_satoshis"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fee_rate_per_kw"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding_address"</span><span class="p">:</span><span class="s2">"mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding_pubkey"</span><span class="p">:</span><span class="s2">"021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding_satoshis"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"htlc_base_point"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"htlc_minimum_msat"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"max_accepted_htlcs"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"max_htlc_value_in_flight_msat"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"payment_base_point"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pub_key_a"</span><span class="p">:</span><span class="s2">"021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pub_key_b"</span><span class="p">:</span><span class="s2">"03efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce9"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"push_msat"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"revocation_base_point"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">43</span><span class="p">,</span><span class="mi">207</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">133</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">214</span><span class="p">,</span><span class="mi">91</span><span class="p">,</span><span class="mi">184</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">209</span><span class="p">,</span><span class="mi">133</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">147</span><span class="p">,</span><span class="mi">178</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">245</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">207</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">105</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">183</span><span class="p">],</span><span class="w">
        </span><span class="s2">"to_self_delay"</span><span class="p">:</span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>Bob replies to accept, his OBD completes his message and routes it to Alice&#39;s OBD. Then Alice sees the response of acceptance. </p>

<p><strong>Message Type: -33</strong></p>

<p><strong>Bob Request</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>body</td>
<td>the temporary channel id, used before real funding completes.</td>
</tr>
<tr>
<td>funding pubkey</td>
<td>-------</td>
<td>body</td>
<td>public key of fundee(Bob), who wish to deposite BTC and other tokens to the channel. Current implementation of OBD supports one-way deposite. Fundee does not need to fund the channel.</td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>body</td>
<td>true or false to deny.</td>
</tr>
</tbody></table>

<p><strong>OBD Response：</strong><br>
This response is simutanously sent to Alice&#39;s OBD.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>accept_at</td>
<td>-------</td>
<td>result</td>
<td>time of acceptance</td>
</tr>
<tr>
<td>address_a</td>
<td>-------</td>
<td>result</td>
<td>address of Alice</td>
</tr>
<tr>
<td>address_b</td>
<td>-------</td>
<td>result</td>
<td>address of Bob</td>
</tr>
<tr>
<td>chain_hash</td>
<td>1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P</td>
<td>result</td>
<td>identify the public chain. Default is OmniLayer</td>
</tr>
<tr>
<td>channel_address</td>
<td>-------</td>
<td>result</td>
<td>the p2whk address of the channel</td>
</tr>
<tr>
<td>channel_address_redeem_script</td>
<td>-------</td>
<td>result</td>
<td>redeem script of the multi-sig address</td>
</tr>
<tr>
<td>channel_address_script_pub_key</td>
<td>-------</td>
<td>result</td>
<td>the script pubkey</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td>the global unique channel id</td>
</tr>
<tr>
<td>channel_reserve_satoshis</td>
<td>-------</td>
<td>result</td>
<td>reserved satoshis in the channel</td>
</tr>
<tr>
<td>close_at</td>
<td>-------</td>
<td>result</td>
<td>close time</td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td>create time</td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td>the funder who created this channel. Alice in this case.</td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>delayed_payment_base_point</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>dust_limit_satoshis</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>fee_rate_per_kw</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_address</td>
<td>-------</td>
<td>result</td>
<td>Funder&#39;s address from where he send money to the channel</td>
</tr>
<tr>
<td>funding_pubkey</td>
<td>-------</td>
<td>result</td>
<td>public key of funder, who wish to deposite BTC and other tokens to the channel</td>
</tr>
<tr>
<td>funding_satoshis</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>htlc_base_point</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>htlc_minimum_msat</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>max_accepted_htlcs</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>max_htlc_value_in_flight_msat</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>payment_base_point</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_a</td>
<td>-------</td>
<td>result</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>peer_id_b</td>
<td>-------</td>
<td>result</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>pub_key_a</td>
<td>-------</td>
<td>result</td>
<td>public key of funder</td>
</tr>
<tr>
<td>pub_key_b</td>
<td>-------</td>
<td>result</td>
<td>public key of fundee. Current OBD implementation does not requir fundee to deposit money to a channel.</td>
</tr>
<tr>
<td>push_msat</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>revocation_base_point</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>to_self_delay</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>
<h1 id='deposit-btc-for-miner-fee'>Deposit BTC for miner fee</h1>
<p>Alice tells her OBD to create a funding transaction. Since on Omnilayer/BTC, the miner fee is bitcoin, so that first we need to deposit small amount of bitcoin used in withdraw money, creating temporary multi-sig addresses for transactions in RSMC and HTLC.  </p>

<p>After that, we need to create the second part of transactions that deposit tokens which both sides agreed to fund the channel.  </p>

<p>This is the place that OBD differs from LND or other lightning implementation, since they are for BTC only, so there is no need for them to deposit extra bitcoin for fee.</p>

<aside class="warning">Another difference is that we need two transactions for the miner fees, one for the channel, and the other for a internal temporary multi-sig address. So Alice may raise request twice, and Bob needs to answer twice.


It is not finalized yet.
</aside>
<h2 id='funder-create-funding-transaction'>funder create funding transaction</h2>
<!-- right -->

<blockquote>
<p>Alice&#39;s data:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>address: mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs  
privkey: cUAdadTkjeVFsNz5ifhkETfAzk5PvhnLWtmdSKgbyTTjSCE4MYWy  
channel address：2N1DFjaE4yCcECdFwgLQcLmNrLV5zetgQtE  
</code></pre>
<blockquote>
<p>Alice requests:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
        <span class="s2">"type"</span>:1009,
        <span class="s2">"data"</span>:<span class="o">{</span>
            <span class="s2">"from_address"</span>:<span class="s2">"mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs"</span>,
            <span class="s2">"from_address_private_key"</span>:<span class="s2">"cUAdadTkjeVFsNz5ifhkETfAzk5PvhnLWtmdSKgbyTTjSCE4MYWy"</span>,
            <span class="s2">"to_address"</span>:<span class="s2">"2N1DFjaE4yCcECdFwgLQcLmNrLV5zetgQtE"</span>,
            <span class="s2">"amount"</span>:0.0001,
            <span class="s2">"miner_fee"</span>:0.00001,
        <span class="o">}</span>

<span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">1009</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"hex"</span><span class="p">:</span><span class="s2">"0200000001c77e31c262301a13d0fa6cec9827b25017bd30fb1ad3793b2c8ff66461fc7ab5000000006a473044022047c441b3f34bcce960f667391941a4db29de16bb00dbee97d4c85f60995d4b5102201a4f2d13a0cc22e7e62ee3fe04d0cc7dd36e375108a9242ede7aa718a5c5578a0121021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32dffffffff02102700000000000017a9145761a1d45b8a6e7caa10a4bcecca97630c67af468748170f00000000001976a914b5770ba3d6d34f5fdd8d582f81fb383975bb9c6d88ac00000000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="s2">"266b14b6c816fcf2525b1b009ea966f34b6b6a1774065501fa242dbc847e5a68"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><strong>Message Type: 1009</strong></p>

<p><strong>Alice Requests</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from_address</td>
<td>-------</td>
<td>data</td>
<td>address of funder, from where the BTC is transferred.</td>
</tr>
<tr>
<td>from_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key.</td>
</tr>
<tr>
<td>to_address</td>
<td>-------</td>
<td>data</td>
<td>the channel multi-sig address.</td>
</tr>
<tr>
<td>amount</td>
<td>0.0001</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>miner_fee</td>
<td>0.00001</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>hex</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>txid</td>
<td>-------</td>
<td>result</td>
<td>transaction id</td>
</tr>
</tbody></table>
<h2 id='funder-notifies-fundee'>funder notifies fundee</h2>
<!-- right -->

<blockquote>
<p>Alice: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>:-3400,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"temporary_channel_id"</span>:[43,207,125,166,133,84,214,91,184,177,149,10,111,209,133,201,147,178,48,245,6,18,162,239,207,45,105,158,251,200,138,183],
        <span class="s2">"channel_address_private_key"</span>:<span class="s2">"cUAdadTkjeVFsNz5ifhkETfAzk5PvhnLWtmdSKgbyTTjSCE4MYWy"</span>,           <span class="s2">"funding_tx_hex"</span>:<span class="s2">"0200000001c77e31c262301a13d0fa6cec9827b25017bd30fb1ad3793b2c8ff66461fc7ab5000000006a473044022047c441b3f34bcce960f667391941a4db29de16bb00dbee97d4c85f60995d4b5102201a4f2d13a0cc22e7e62ee3fe04d0cc7dd36e375108a9242ede7aa718a5c5578a0121021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32dffffffff02102700000000000017a9145761a1d45b8a6e7caa10a4bcecca97630c67af468748170f00000000001976a914b5770ba3d6d34f5fdd8d582f81fb383975bb9c6d88ac00000000"</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Responses：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3400</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="s2">"266b14b6c816fcf2525b1b009ea966f34b6b6a1774065501fa242dbc847e5a68"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">43</span><span class="p">,</span><span class="mi">207</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">133</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">214</span><span class="p">,</span><span class="mi">91</span><span class="p">,</span><span class="mi">184</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">209</span><span class="p">,</span><span class="mi">133</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">147</span><span class="p">,</span><span class="mi">178</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">245</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">207</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">105</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">183</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>Alice tells her OBD to notify Bob that she created the funding transaction by payloads packed in the message -3400.  </p>

<p><strong>Message Type: -3400</strong></p>

<p><strong>Alice Requests</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key of the channel that Alice holds</td>
</tr>
<tr>
<td>funding_tx_hex</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>amount</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_txid</td>
<td>-------</td>
<td>result</td>
<td>funding transaction id</td>
</tr>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>
<h2 id='fundee-replies'>fundee replies</h2>
<!-- right -->

<blockquote>
<p>Bob relies: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>:-3500,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"temporary_channel_id"</span>:[43,207,125,166,133,84,214,91,184,177,149,10,111,209,133,201,147,178,48,245,6,18,162,239,207,45,105,158,251,200,138,183],
        <span class="s2">"channel_address_private_key"</span>:<span class="s2">"cV6dif91LHD8Czk8BTgvYZR3ipUrqyMDMtUXSWsThqpHaQJUuHKA"</span>,
        <span class="s2">"funding_txid"</span>:<span class="s2">"266b14b6c816fcf2525b1b009ea966f34b6b6a1774065501fa242dbc847e5a68"</span>,
        <span class="s2">"approval"</span>:true
        <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Responses：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3500</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="s2">"2019-09-21T00:14:42.17012+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">43</span><span class="p">,</span><span class="mi">207</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">133</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">214</span><span class="p">,</span><span class="mi">91</span><span class="p">,</span><span class="mi">184</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">209</span><span class="p">,</span><span class="mi">133</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">147</span><span class="p">,</span><span class="mi">178</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">245</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">207</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">105</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">183</span><span class="p">],</span><span class="w">
        </span><span class="s2">"tx_hash"</span><span class="p">:</span><span class="s2">"0200000001685a7e84bc2d24fa01550674176a6b4bf366a99e001b5b52f2fc16c8b6146b2600000000d90047304402206724a55a5f58c8cc0325e5b2d7e9bce844c621194777a2bac4ae18f0794fe316022038beaa93be8cd70b7337b68c9fb48377c4833739a1165e3104db8b50a6d75573014730440220723785063cd4767cd275d6f861ab3147b29ba8035123ca140d6c09f329562cac02200d3e25d2b2e10975bcf98241715c87d8c380e92fa5aad7e8470da1d2e260ff3701475221021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d2103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952aeffffffff01581b0000000000001976a914b5770ba3d6d34f5fdd8d582f81fb383975bb9c6d88ac00000000"</span><span class="p">,</span><span class="s2">"txid"</span><span class="p">:</span><span class="s2">"cd30f25260a7d5971949802974f57da45341146404ebb26db3917ef5bc841b9e"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>Bob tells his OBD to reply Alice that he knows the funding by message -3500. </p>

<p><strong>Message Type: -3500</strong></p>

<p><strong>Bob Replies</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key of the channel that Bob holds</td>
</tr>
<tr>
<td>funding_txid</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>data</td>
<td>true or false</td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>owner</td>
<td>-------</td>
<td>result</td>
<td>the funder is the owner</td>
</tr>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>tx_hash</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>
<h1 id='deposit-omni-assets'>Deposit Omni Assets</h1>
<p>Alice starts to deposit omni assets to the channel. This is quite similar to the the btc funding procedure.</p>
<h2 id='funder-creates-token-funding-transaction'>funder creates token funding transaction</h2>
<!-- right -->

<blockquote>
<p>Alice&#39;s data:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>address: mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs  
privkey: cUAdadTkjeVFsNz5ifhkETfAzk5PvhnLWtmdSKgbyTTjSCE4MYWy  
channel address：2N1DFjaE4yCcECdFwgLQcLmNrLV5zetgQtE  
</code></pre>
<blockquote>
<p>Alice requests:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
        <span class="s2">"type"</span>:2001,
        <span class="s2">"data"</span>:<span class="o">{</span>
            <span class="s2">"from_address"</span>:<span class="s2">"mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs"</span>,
            <span class="s2">"from_address_private_key"</span>:<span class="s2">"cUAdadTkjeVFsNz5ifhkETfAzk5PvhnLWtmdSKgbyTTjSCE4MYWy"</span>,
            <span class="s2">"to_address"</span>:<span class="s2">"2N1DFjaE4yCcECdFwgLQcLmNrLV5zetgQtE"</span>,
            <span class="s2">"amount"</span>:6,
            <span class="s2">"property_id"</span>: 121

    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">2001</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"hex"</span><span class="p">:</span><span class="s2">"02000000016aabc30d6ef0d7e1d02572ca30450421a7541b7bf3d9b9937240b977b228215c010000006a473044022077352945e8cbc96475ba6e8af7f808980eeb93560ecca416dc5e94e561af0ebe022044a1c15a436594bade0db2a955e05b629d8611f15b3603aea13100b0ec2798900121021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32dffffffff0384b30e00000000001976a914b5770ba3d6d34f5fdd8d582f81fb383975bb9c6d88ac0000000000000000166a146f6d6e6900000000000000790000000023c346001c0200000000000017a9145761a1d45b8a6e7caa10a4bcecca97630c67af468700000000"</span><span class="w">
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="s2">"missing??? our development team?"</span><span class="w">   
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><strong>Message Type: 2001</strong></p>

<p><strong>Alice Requests</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from_address</td>
<td>-------</td>
<td>data</td>
<td>address of funder, from where the BTC is transferred.</td>
</tr>
<tr>
<td>from_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key.</td>
</tr>
<tr>
<td>to_address</td>
<td>-------</td>
<td>data</td>
<td>the channel multi-sig address.</td>
</tr>
<tr>
<td>amount</td>
<td>0.0001</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>data</td>
<td>the omni asset id that has been funding.</td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>hex</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>txid</td>
<td>-------</td>
<td>result</td>
<td>transaction id</td>
</tr>
</tbody></table>
<h2 id='funder-notifies-fundee-the-token-funding-is-created'>funder notifies fundee the token funding is created</h2>
<!-- right -->

<blockquote>
<p>Alice data: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code>address  n2gj8MDzUU7JZ6eVF5VpXcL4wUfaDXzTfJ
privkey   cSgTisoiZLzH5vrwHBMAXLC5nvND2ffcqqDtejMg12rEVrUMeP5R
pubkey   03ea01f8b137df5744ec2b0b91bc46139cabf228403264df65f6233bd7f0cbd17d
</code></pre>
<blockquote>
<p>Alice sends: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>:-34,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"temporary_channel_id"</span>:[43,207,125,166,133,84,214,91,184,177,149,10,111,209,133,201,147,178,48,245,6,18,162,239,207,45,105,158,251,200,138,183],            <span class="s2">"funding_tx_hex"</span>:<span class="s2">"02000000016aabc30d6ef0d7e1d02572ca30450421a7541b7bf3d9b9937240b977b228215c010000006a473044022077352945e8cbc96475ba6e8af7f808980eeb93560ecca416dc5e94e561af0ebe022044a1c15a436594bade0db2a955e05b629d8611f15b3603aea13100b0ec2798900121021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32dffffffff0384b30e00000000001976a914b5770ba3d6d34f5fdd8d582f81fb383975bb9c6d88ac0000000000000000166a146f6d6e6900000000000000790000000023c346001c0200000000000017a9145761a1d45b8a6e7caa10a4bcecca97630c67af468700000000"</span>,        
        <span class="s2">"temp_address_pub_key"</span>:<span class="s2">"03ea01f8b137df5744ec2b0b91bc46139cabf228403264df65f6233bd7f0cbd17d"</span>,
        <span class="s2">"temp_address_private_key"</span>:<span class="s2">"cSgTisoiZLzH5vrwHBMAXLC5nvND2ffcqqDtejMg12rEVrUMeP5R"</span>,
        <span class="s2">"channel_address_private_key"</span>:<span class="s2">"cUAdadTkjeVFsNz5ifhkETfAzk5PvhnLWtmdSKgbyTTjSCE4MYWy"</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Responses：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-34</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"amount_a"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount_b"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">59</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">228</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">223</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">136</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">69</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">182</span><span class="p">,</span><span class="mi">254</span><span class="p">,</span><span class="mi">95</span><span class="p">,</span><span class="mi">86</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">122</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">129</span><span class="p">,</span><span class="mi">249</span><span class="p">,</span><span class="mi">52</span><span class="p">,</span><span class="mi">197</span><span class="p">],</span><span class="w">
        </span><span class="s2">"channel_info_id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="s2">"2019-09-21T00:58:55.448353+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fundee_sign_at"</span><span class="p">:</span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funder_address"</span><span class="p">:</span><span class="s2">"mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funder_pub_key_2_for_commitment"</span><span class="p">:</span><span class="s2">"03ea01f8b137df5744ec2b0b91bc46139cabf228403264df65f6233bd7f0cbd17d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding_output_index"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="s2">"02000000016aabc30d6ef0d7e1d02572ca30450421a7541b7bf3d9b9937240b977b228215c010000006a473044022077352945e8cbc96475ba6e8af7f808980eeb93560ecca416dc5e94e561af0ebe022044a1c15a436594bade0db2a955e05b629d8611f15b3603aea13100b0ec2798900121021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32dffffffff0384b30e00000000001976a914b5770ba3d6d34f5fdd8d582f81fb383975bb9c6d88ac0000000000000000166a146f6d6e6900000000000000790000000023c346001c0200000000000017a9145761a1d45b8a6e7caa10a4bcecca97630c67af468700000000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="s2">"c734f981de217a95764e565ffeb6464507fda588118754df3d4ec5cbe487fd3b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="mi">121</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>Alice tells her OBD to notify Bob that she created the token funding transaction by payloads packed in the message -34.  </p>

<p><strong>Message Type: -34</strong></p>

<p><strong>Alice sends</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>funding_tx_hex</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key of the channel that Alice holds</td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>amount_a</td>
<td>-------</td>
<td>result</td>
<td>how much has been funded</td>
</tr>
<tr>
<td>amount_b</td>
<td>-------</td>
<td>result</td>
<td>none required</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td>channel officially created</td>
</tr>
<tr>
<td>channel_info_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td>created by the funder</td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>fundee_sign_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funder_address</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funder_pub_key_2_for_commitment</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_output_index&quot;</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_tx_hex</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_txid</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_a</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_b</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>
<h2 id='fundee-replies-knowing-the-token-has-been-funded'>fundee replies knowing the token has been funded</h2>
<!-- right -->

<blockquote>
<p>Bob sends: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>:-35,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"channel_id"</span>:[59,253,135,228,203,197,78,61,223,84,135,17,136,165,253,7,69,70,182,254,95,86,78,118,149,122,33,222,129,249,52,197],
        <span class="s2">"fundee_channel_address_private_key"</span>:<span class="s2">"cV6dif91LHD8Czk8BTgvYZR3ipUrqyMDMtUXSWsThqpHaQJUuHKA"</span>,
        <span class="s2">"approval"</span>:true
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Responses：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-35</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"amount_a"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount_b"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">59</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">228</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">223</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">136</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">69</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">182</span><span class="p">,</span><span class="mi">254</span><span class="p">,</span><span class="mi">95</span><span class="p">,</span><span class="mi">86</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">122</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">129</span><span class="p">,</span><span class="mi">249</span><span class="p">,</span><span class="mi">52</span><span class="p">,</span><span class="mi">197</span><span class="p">],</span><span class="w">
        </span><span class="s2">"channel_info_id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="s2">"2019-09-21T00:58:55.448353+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="s2">"fundee_sign_at"</span><span class="p">:</span><span class="s2">"2019-09-21T01:01:53.970256+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funder_address"</span><span class="p">:</span><span class="s2">"mx4TDCXP2DedxcuA8RXaQ6c4q2GKAimUPs"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funder_pub_key_2_for_commitment"</span><span class="p">:</span><span class="s2">"03ea01f8b137df5744ec2b0b91bc46139cabf228403264df65f6233bd7f0cbd17d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding_output_index"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="s2">"02000000016aabc30d6ef0d7e1d02572ca30450421a7541b7bf3d9b9937240b977b228215c010000006a473044022077352945e8cbc96475ba6e8af7f808980eeb93560ecca416dc5e94e561af0ebe022044a1c15a436594bade0db2a955e05b629d8611f15b3603aea13100b0ec2798900121021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32dffffffff0384b30e00000000001976a914b5770ba3d6d34f5fdd8d582f81fb383975bb9c6d88ac0000000000000000166a146f6d6e6900000000000000790000000023c346001c0200000000000017a9145761a1d45b8a6e7caa10a4bcecca97630c67af468700000000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="s2">"c734f981de217a95764e565ffeb6464507fda588118754df3d4ec5cbe487fd3b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="mi">121</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>Bob tells his OBD to reply Alice that he knows the funding by message -35, and OBD has created commitment transactions (C1a &amp; RD1a)</p>

<p><strong>Message Type: -35</strong></p>

<p><strong>Bob Replies</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>fundee_channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key of the channel that Bob holds</td>
</tr>
<tr>
<td>funding_txid</td>
<td>-------</td>
<td>data</td>
<td>transaction id missing???</td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>data</td>
<td>true or false</td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>amount_a</td>
<td>-------</td>
<td>result</td>
<td>how much the funder deposited</td>
</tr>
<tr>
<td>amount_b</td>
<td>-------</td>
<td>result</td>
<td>none required</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>channel_info_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>fundee_sign_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funder_address</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funder_pub_key_2_for_commitment</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_output_index</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_tx_hex</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_txid</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_a</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>
<h1 id='payments-in-channel'>Payments in Channel</h1>
<p>Funder/fundee create commitment transactions.</p>
<h2 id='sender-creates-a-commitment-transaction-to-pay'>sender creates a commitment transaction to pay</h2>
<!-- right -->

<blockquote>
<p>Alice&#39;s data:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>last_temp_pub_key：       n2gj8MDzUU7JZ6eVF5VpXcL4wUfaDXzTfJ
last_temp_private_key：  cSgTisoiZLzH5vrwHBMAXLC5nvND2ffcqqDtejMg12rEVrUMeP5R
curr_temp_address：       mpnHbpARXjUBcf6vib7E3jjD6Zv4CrvYuW
curr_temp_private_key： cP8vR19XbtytyHgyBh1SV5dVAMLrLR2rzSU9EAcQTCUHij61u5C2
curr_temp_pub_key: 02b8302d22a50fd84f34d528ff98998a6959bc7fb8f45b5f3fb44e23101aa5d8f2
</code></pre>
<blockquote>
<p>Alice creates a commitment transaction:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>:-351,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"channel_id"</span>:[59,253,135,228,203,197,78,61,223,84,135,17,136,165,253,7,69,70,182,254,95,86,78,118,149,122,33,222,129,249,52,197],
        <span class="s2">"amount"</span>:0.1,
        <span class="s2">"curr_temp_address_pub_key"</span>:<span class="s2">"02b8302d22a50fd84f34d528ff98998a6959bc7fb8f45b5f3fb44e23101aa5d8f2"</span>,
        <span class="s2">"curr_temp_address_private_key"</span>:<span class="s2">"cP8vR19XbtytyHgyBh1SV5dVAMLrLR2rzSU9EAcQTCUHij61u5C2"</span>,
        <span class="s2">"property_id"</span>:121,
        <span class="s2">"channel_address_private_key"</span>:<span class="s2">"cUAdadTkjeVFsNz5ifhkETfAzk5PvhnLWtmdSKgbyTTjSCE4MYWy"</span>,
        <span class="s2">"last_temp_address_private_key"</span>:<span class="s2">"cSgTisoiZLzH5vrwHBMAXLC5nvND2ffcqqDtejMg12rEVrUMeP5R"</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-351</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">59</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">228</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">223</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">136</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">69</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">182</span><span class="p">,</span><span class="mi">254</span><span class="p">,</span><span class="mi">95</span><span class="p">,</span><span class="mi">86</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">122</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">129</span><span class="p">,</span><span class="mi">249</span><span class="p">,</span><span class="mi">52</span><span class="p">,</span><span class="mi">197</span><span class="p">],</span><span class="w">
        </span><span class="s2">"curr_temp_address_private_key"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"02b8302d22a50fd84f34d528ff98998a6959bc7fb8f45b5f3fb44e23101aa5d8f2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_temp_address_private_key"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="mi">121</span><span class="p">,</span><span class="w">
        </span><span class="s2">"request_commitment_hash"</span><span class="p">:</span><span class="s2">"8a55f150c34e2720a587dde3809e81959701e1dd3f78c1e1fc9960c132566fe0"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><strong>Message Type: -351</strong></p>

<p><strong>Either funder or fundee sends:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>amount</td>
<td>-------</td>
<td>data</td>
<td>amount to pay</td>
</tr>
<tr>
<td>curr_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td>temporary multi-sig address</td>
</tr>
<tr>
<td>curr_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>the private key of the temporary multi-sig address currently in use.</td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>data</td>
<td>the omni asset id that has been funding.</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>Alice&#39;s private key of the channel</td>
</tr>
<tr>
<td>last_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>the private key of the last temporary multi-sig address</td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>amount</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>curr_temp_address_private_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>curr_temp_address_pub_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>last_temp_address_private_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>request_commitment_hash</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>
<h2 id='receiever-accepts-the-tokens'>Receiever accepts the tokens</h2>
<!-- right -->

<blockquote>
<p>Bob&#39;s data: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code>last_temp_pub_key： 
last_temp_private_key： 
curr_temp_pub_key：       mt1jUkFb9JtR3qBeYHqJE68S6TUct7fB8r
curr_temp_private_key： cQm58g783uvXbFjTjLN5STR3TrPiKueC5f9SCkAc9kSew4dj2Y2i
curr_temp_pub_key：   0277bf9e0df3ffe2d8f22356fb198e9b0a2237b8c51bde77e3c7da5df09a4dba05
</code></pre>
<blockquote>
<p>Bob replies: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code> <span class="o">{</span>
    <span class="s2">"type"</span>:-352,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"channel_id"</span>:[59,253,135,228,203,197,78,61,223,84,135,17,136,165,253,7,69,70,182,254,95,86,78,118,149,122,33,222,129,249,52,197],
        <span class="s2">"curr_temp_address_pub_key"</span>:<span class="s2">"0277bf9e0df3ffe2d8f22356fb198e9b0a2237b8c51bde77e3c7da5df09a4dba05"</span>,
        <span class="s2">"curr_temp_address_private_key"</span>:<span class="s2">"cQm58g783uvXbFjTjLN5STR3TrPiKueC5f9SCkAc9kSew4dj2Y2i"</span>,
        <span class="s2">"last_temp_private_key"</span>:<span class="s2">""</span>,
        <span class="s2">"request_commitment_hash"</span>:<span class="s2">"8a55f150c34e2720a587dde3809e81959701e1dd3f78c1e1fc9960c132566fe0"</span>,
        <span class="s2">"channel_address_private_key"</span>:<span class="s2">"cV6dif91LHD8Czk8BTgvYZR3ipUrqyMDMtUXSWsThqpHaQJUuHKA"</span>,
        <span class="s2">"approval"</span>:true
    <span class="o">}</span>
<span class="o">}</span>

</code></pre>
<blockquote>
<p>OBD Responses：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-352</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"amount_b"</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount_m"</span><span class="p">:</span><span class="mf">5.9</span><span class="p">,</span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">59</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">228</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">223</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">136</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">69</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">182</span><span class="p">,</span><span class="mi">254</span><span class="p">,</span><span class="mi">95</span><span class="p">,</span><span class="mi">86</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">122</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">129</span><span class="p">,</span><span class="mi">249</span><span class="p">,</span><span class="mi">52</span><span class="p">,</span><span class="mi">197</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="s2">"2019-09-21T01:38:02.249498+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_hash"</span><span class="p">:</span><span class="s2">"235d465eae3bb8c71e97ca08cca295598461cc8d23a9bdf4e6ff09e4e9f9323f"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"input_amount"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"input_txid"</span><span class="p">:</span><span class="s2">"c734f981de217a95764e565ffeb6464507fda588118754df3d4ec5cbe487fd3b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"input_vout"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="s2">"last_commitment_tx_id"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="s2">"last_edit_time"</span><span class="p">:</span><span class="s2">"2019-09-21T01:38:02.249498+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_hash"</span><span class="p">:</span><span class="s2">"8a55f150c34e2720a587dde3809e81959701e1dd3f78c1e1fc9960c132566fe0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"multi_address"</span><span class="p">:</span><span class="s2">"2Mz8QZz1RxwpHioy1bgyPA4rhXXWwEkFDtW"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="mi">121</span><span class="p">,</span><span class="w">
        </span><span class="s2">"redeem_script"</span><span class="p">:</span><span class="s2">"522102b8302d22a50fd84f34d528ff98998a6959bc7fb8f45b5f3fb44e23101aa5d8f22103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952ae"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"script_pub_key"</span><span class="p">:</span><span class="s2">"a9144b7ecd257a459e0fabf75b72fdfd98a54a12e7c187"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"send_at"</span><span class="p">:</span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sign_at"</span><span class="p">:</span><span class="s2">"2019-09-21T01:38:03.119512+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"temp_address_pub_key"</span><span class="p">:</span><span class="s2">"02b8302d22a50fd84f34d528ff98998a6959bc7fb8f45b5f3fb44e23101aa5d8f2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transaction_sign_hex_to_other"</span><span class="p">:</span><span class="s2">"02000000043bfd87e4cbc54e3ddf54871188a5fd074546b6fe5f564e76957a21de81f934c702000000d900473044022068d84ef3d9d6db850d1c348ae52158ee542758ed4f82f1359a901999657ea8d902202e63d2c3e7ddba77b69fd6d71eee072964f9e0fd6972b11922ae64b4d4b5d7fa0147304402202903a8784eeb72dc7f32e048a50134f217a4b7ccf371066ddce2c7fafa863a9c0220117307e4e7efe7e74321707310e6a2c387e4a5002fd3bc654d1860275ee157e801475221021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d2103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952aeffffffff6aabc30d6ef0d7e1d02572ca30450421a7541b7bf3d9b9937240b977b228215c00000000d90047304402205536325b0b93f34528c4cb8d31f0f43c39bd035db521bc3dca54ae8a99accd0902203bd9ca2bce0ee8314f5a8998a0cb64a0edc17abe8f60ad813e0e41f1ddaf9bdc014730440220628681cd6a6fc23ce8074788ce13c7da998dc94af9fd9d1d0bbe8ad98f86ddbd02205c016cabce74eaf577b6702760129cd3f86173b6ffeb008cca7783240634dde901475221021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d2103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952aeffffffffd8f2a3c2a2b2e6678d21025aed46cbc905ba25ac55e0dfd50a2d719b687f1c5203000000d900473044022001e87986132f4f8ad3e4264044fecdd1afe813aeed1a540ff96f11c159774c0f022016b7cb615ae10e48d911b5fddf3e8770829e489f61971203e9462854c81b493a0147304402206e46182bf84fe5c4d1f7b5c78b80c315bb6a5f7922a6f33afa68cec3a84f79ad02205168f413d7345fbb1d22f7f2540588934e5851d2243c3ad03f6ac1e04ccf26d001475221021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d2103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952aeffffffffdea307c20723ced3445b67d801c2c28a7cc371092e9500dac8f96d5c892abba402000000d90047304402204586943539db1a9087b26678a7c6a20cadc38e2545d061ab8c2a25c245d817de02202f8bfb63e5448054be581ffffb64db1297ca95728bdf4be8f0b6ffff7107dbe8014730440220750202e5eef02556b22b124bc1bb2452918df7e02fb639e07432fc0e42829a4502204071fc1b6d60d3275b081920085777134547f4c986f15bbb5284989fc07d3ebb01475221021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d2103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952aeffffffff039a460000000000001976a914b5770ba3d6d34f5fdd8d582f81fb383975bb9c6d88ac0000000000000000166a146f6d6e690000000000000079000000000098968022020000000000001976a914c2e30e5f058df787de0529e0742d7ef7a13231ab88ac00000000"</span><span class="p">,</span><span class="s2">"transaction_sign_hex_to_temp_multi_address"</span><span class="p">:</span><span class="s2">"0200000001685a7e84bc2d24fa01550674176a6b4bf366a99e001b5b52f2fc16c8b6146b2600000000d90047304402207fdf6d9de273352f215b7139a169b9c6046fc33f5e5c26a4012c6b32e07137aa02200a437ce51e3a02478c59d8c21a8c71ea6fda6dac62c5032ec5f131f21a7e8ee20147304402205eccc7e4b8bcae3269d6eb25aeb6823d88562f308c203590b86073d35f9d3d7e02203130cf67e48b539d7b3c17400a7fba88c812315f465a42dabab046d65a52054c01475221021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d2103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952aeffffffff033c1900000000000017a9144b7ecd257a459e0fabf75b72fdfd98a54a12e7c1870000000000000000166a146f6d6e69000000000000007900000000232aaf801c0200000000000017a9144b7ecd257a459e0fabf75b72fdfd98a54a12e7c18700000000"</span><span class="p">,</span><span class="s2">"txid_to_other"</span><span class="p">:</span><span class="s2">"3065fa232bb5dec89104bc487359ac12b2480bb0762f64abbebd6adf0795bc13"</span><span class="p">,</span><span class="s2">"txid_to_temp_multi_address"</span><span class="p">:</span><span class="s2">"74cffd8987cf01ed02d355aad82c38aadd991c4f185b3e394c5bade55d2ceb73"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<!-- center -->

<p>Receiever notify the sender that he has receieved the money. </p>

<p><strong>Message Type: -352</strong></p>

<p><strong>Receiever sends</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td>to be added</td>
</tr>
<tr>
<td>curr_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>to be added</td>
</tr>
<tr>
<td>last_temp_private_key</td>
<td>-------</td>
<td>data</td>
<td>to be added</td>
</tr>
<tr>
<td>request_commitment_hash</td>
<td>-------</td>
<td>data</td>
<td>to be added</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key of the channel that Bob holds</td>
</tr>
</tbody></table>

<p>approval</p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>amount_b</td>
<td>-------</td>
<td>result</td>
<td>how much has been payed</td>
</tr>
<tr>
<td>amount_m</td>
<td>-------</td>
<td>result</td>
<td>the balance of the sender</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td>channel officially created</td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td>created by the funder</td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>input_amount</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>input_txid</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>input_vout</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>last_commitment_tx_id</td>
<td>-------</td>
<td>result</td>
<td>to be added</td>
</tr>
<tr>
<td>last_edit_time</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>last_hash</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>multi_address</td>
<td>-------</td>
<td>result</td>
<td>to be added</td>
</tr>
<tr>
<td>owner</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_a</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_b</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>redeem_script</td>
<td>-------</td>
<td>result</td>
<td>to be added</td>
</tr>
<tr>
<td>script_pub_key</td>
<td>-------</td>
<td>result</td>
<td>to be added</td>
</tr>
<tr>
<td>send_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>sign_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>temp_address_pub_key</td>
<td>-------</td>
<td>result</td>
<td>to be added</td>
</tr>
<tr>
<td>transaction_sign_hex_to_other</td>
<td>-------</td>
<td>result</td>
<td>to be added</td>
</tr>
</tbody></table>
<h1 id='htlc-in-obd'>HTLC in OBD</h1>
<p>HTLC(Hashed Timelock Contract) is the second foundamental module in lightning network. In general, any two clients need no direct channels between them for transferring tokens or exchanging information, they can use their direct channels to build a bridge for this purpose. HTLC is designed for chaining the channels together in delivering messages from one client to another.</p>

<p><code>
[Alice --(10 USDT)--&gt; Bob] ==(Bob has two channels)== [Bob --(10 USDT)--&gt; Carol] ==(Carol has two channels)== [Carol --(10 USDT)--&gt; David]
</code>  </p>

<p><strong>[A B]</strong> stands for the channel built by A and B</p>

<p>A formal HTL contract describes the following procedure:</p>

<aside class="notice">
If Bob can tell Alice the secret R, which is the pre-image of <code>Hash(R)</code> that some one else (Carol) in the chain shared with Bob 3 days ago in exchange of 10 USDT in the channel <code>[Bob Carol]</code>, then Bob will get the 10 USDT fund inside the channel <code>[Alice Bob]</code>, otherwise Alice gets her 10 USDT back.
</aside>
 

<p>Readers shall find the latest specification in <a href="https://github.com/LightningOnOmnilayer/Omni-BOLT-spec/blob/master/OmniBOLT-04-HTLC-and-Payment-Routing.md">OmniBOLT 04: HTLC and Payment Routing</a></p>
<h2 id='prepare-data-for-client'>Prepare Data for Client</h2>
<!-- right -->

<blockquote>
<p>Alice&#39;s data:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>adderss: muYrqVWTKnkaVAMuqn59Ta6GL912ixpxit
pubkey:  029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c
privkey: cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8
</code></pre>
<blockquote>
<p>Bob&#39;s data:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>adderss: mtSJixJ8eCguXDAdkGGoQu3nG1n77a6td8
pubkey:  03da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f
privkey: cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt
</code></pre>
<blockquote>
<p>Carol&#39;s data:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>adderss: mgoiBkppoJMc8cC8XRYNvFEjath5DrKqj8
pubkey:  034094927aa69a96d82d7e67146cf9b8dcd775919d1373d5319454e6004c0cdf7a
privkey: cMxR8h9z5oKrdyuXVR9uzBbyyaJz1karxH1FW5xezhKzxQc7sCJV
</code></pre>
<!-- center -->

<p>Payments via HTLC involve many clients and channels among them, in order for demonstration the complete process, we simply setup three clients: Alice, Bob and Carol, and assume only Bob established channel with other clients. OBD has its backend routing algorithm to find the right path for a payment, but it is not exposed to developers.</p>
<h2 id='prepare-data-for-channel-address'>Prepare Data for Channel Address</h2>
<!-- right -->

<blockquote>
<p>Channel [Aice Bob]:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>channel_address：2NFhMhDJT9TsnBCG6L2amH3eDXxgwW6EJh7
redeem_script：5221029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c2103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f52ae
channelId: <span class="o">[</span>174,36,154,103,145,76,58,237,32,61,201,81,17,156,135,216,66,28,83,203,251,152,138,102,158,113,131,32,241,229,43,75]
</code></pre>
<blockquote>
<p>Channel [Bob Carol]:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>channel_address：2MzQW254vB6mHsUvLHxCnKZ73Gcw7kSrvsd
redeem_script：522103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f21034094927aa69a96d82d7e67146cf9b8dcd775919d1373d5319454e6004c0cdf7a52ae
channel:
<span class="o">[</span>223,177,75,185,186,22,47,155,145,238,242,1,158,247,192,1,48,183,197,192,190,72,49,233,62,65,156,103,111,172,109,51]
</code></pre>
<!-- center -->

<p><strong>For testing, we generate two multisig addresses.</strong></p>
<h2 id='login'>Login</h2>
<!-- right -->

<blockquote>
<p>Alice login:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"peer_id"</span><span class="p">:</span><span class="s2">"alice"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob login:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"peer_id"</span><span class="p">:</span><span class="s2">"bob"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Carol login:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"peer_id"</span><span class="p">:</span><span class="s2">"carol"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>Three client login.</p>

<p><strong>Message Type: 1</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>peer_id</td>
<td>-------</td>
<td>data</td>
<td>id of a client</td>
</tr>
</tbody></table>
<h2 id='open-channel-between-alice-and-bob-a2b'>Open Channel between Alice and Bob（A2B）</h2>
<!-- right -->

<blockquote>
<p>Alice send the request:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-32</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"funding_pubkey"</span><span class="p">:</span><span class="s2">"029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"recipient_peer_id"</span><span class="p">:</span><span class="s2">"bob"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-33</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">],</span><span class="w">     </span><span class="s2">"funding_pubkey"</span><span class="p">:</span><span class="s2">"03da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-33</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"accept_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T10:59:51.1997943+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"address_a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"muYrqVWTKnkaVAMuqn59Ta6GL912ixpxit"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"address_b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mtSJixJ8eCguXDAdkGGoQu3nG1n77a6td8"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"chain_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NFhMhDJT9TsnBCG6L2amH3eDXxgwW6EJh7"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_address_redeem_script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5221029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c2103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f52ae"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_address_script_pub_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a914f64403be27af8af0a8abc21aed584b06f80adf3087"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="w">
        </span><span class="s2">"channel_reserve_satoshis"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"close_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T10:58:08.2357582+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"delayed_payment_base_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"dust_limit_satoshis"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"fee_rate_per_kw"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"muYrqVWTKnkaVAMuqn59Ta6GL912ixpxit"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_satoshis"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"htlc_base_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"htlc_minimum_msat"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"max_accepted_htlcs"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"max_htlc_value_in_flight_msat"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"payment_base_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"pub_key_a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"pub_key_b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"push_msat"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"revocation_base_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">],</span><span class="w">
        </span><span class="s2">"to_self_delay"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>Alice sends request to her OBD instance, her OBD helps her complete the message, and routes her request to Bob&#39;s OBD for creating a channel between them. </p>

<p><strong>Message Type: -32</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>funding pubkey</td>
<td>-------</td>
<td>data</td>
<td>public key of funder, who wish to deposite BTC and other tokens to the channel</td>
</tr>
<tr>
<td>recipient_peer_id</td>
<td>-------</td>
<td>body</td>
<td>peer id of the fundee.</td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Response：</strong><br>
This response is simutanously sent to Bob&#39;s OBD. Response is a temporary_channel_id.</p>

<p><br/></p>

<p>Bob replies to accept, his OBD completes his message and routes it to Alice&#39;s OBD. Then Alice sees the response of acceptance. </p>

<p><strong>Message Type: -33</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>body</td>
<td>the temporary channel id, used before real funding completes.</td>
</tr>
<tr>
<td>funding pubkey</td>
<td>-------</td>
<td>body</td>
<td>public key of fundee(Bob), who wish to deposite BTC and other tokens to the channel. Current implementation of OBD supports one-way deposite. Fundee does not need to fund the channel.</td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>body</td>
<td>true or false to deny.</td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Response：</strong><br>
This response is simutanously sent to Alice&#39;s OBD.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>accept_at</td>
<td>-------</td>
<td>result</td>
<td>time of acceptance</td>
</tr>
<tr>
<td>address_a</td>
<td>-------</td>
<td>result</td>
<td>address of Alice</td>
</tr>
<tr>
<td>address_b</td>
<td>-------</td>
<td>result</td>
<td>address of Bob</td>
</tr>
<tr>
<td>chain_hash</td>
<td>1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P</td>
<td>result</td>
<td>identify the public chain. Default is OmniLayer</td>
</tr>
<tr>
<td>channel_address</td>
<td>-------</td>
<td>result</td>
<td>the p2whk address of the channel</td>
</tr>
<tr>
<td>channel_address_redeem_script</td>
<td>-------</td>
<td>result</td>
<td>redeem script of the multi-sig address</td>
</tr>
<tr>
<td>channel_address_script_pub_key</td>
<td>-------</td>
<td>result</td>
<td>the script pubkey</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td>the global unique channel id</td>
</tr>
<tr>
<td>channel_reserve_satoshis</td>
<td>-------</td>
<td>result</td>
<td>reserved satoshis in the channel</td>
</tr>
<tr>
<td>close_at</td>
<td>-------</td>
<td>result</td>
<td>close time</td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td>create time</td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td>the funder who created this channel. Alice in this case.</td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>delayed_payment_base_point</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>dust_limit_satoshis</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>fee_rate_per_kw</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_address</td>
<td>-------</td>
<td>result</td>
<td>Funder&#39;s address from where he send money to the channel</td>
</tr>
<tr>
<td>funding_pubkey</td>
<td>-------</td>
<td>result</td>
<td>public key of funder, who wish to deposite BTC and other tokens to the channel</td>
</tr>
<tr>
<td>funding_satoshis</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>htlc_base_point</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>htlc_minimum_msat</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>max_accepted_htlcs</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>max_htlc_value_in_flight_msat</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>payment_base_point</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_a</td>
<td>-------</td>
<td>result</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>peer_id_b</td>
<td>-------</td>
<td>result</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>pub_key_a</td>
<td>-------</td>
<td>result</td>
<td>public key of funder</td>
</tr>
<tr>
<td>pub_key_b</td>
<td>-------</td>
<td>result</td>
<td>public key of fundee. Current OBD implementation does not requir fundee to deposit money to a channel.</td>
</tr>
<tr>
<td>push_msat</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>revocation_base_point</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>to_self_delay</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>
<h2 id='open-channel-between-bob-and-carol-b2c'>Open Channel between Bob and Carol（B2C）</h2>
<!-- right -->

<blockquote>
<p>Bob send the request:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-32</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"funding_pubkey"</span><span class="p">:</span><span class="s2">"03da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"recipient_peer_id"</span><span class="p">:</span><span class="s2">"carol"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>Carol replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-33</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">],</span><span class="w">     </span><span class="s2">"funding_pubkey"</span><span class="p">:</span><span class="s2">"034094927aa69a96d82d7e67146cf9b8dcd775919d1373d5319454e6004c0cdf7a"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-33</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"accept_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T11:07:27.4224459+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"address_a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mtSJixJ8eCguXDAdkGGoQu3nG1n77a6td8"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"address_b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mgoiBkppoJMc8cC8XRYNvFEjath5DrKqj8"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"chain_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1EXoDusjGwvnjZUyKkxZ4UHEf77z6A5S4P"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MzQW254vB6mHsUvLHxCnKZ73Gcw7kSrvsd"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_address_redeem_script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"522103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f21034094927aa69a96d82d7e67146cf9b8dcd775919d1373d5319454e6004c0cdf7a52ae"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_address_script_pub_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9144e8a01887f51a04610909ceaddb596fbfe109b8f87"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="w">
        </span><span class="s2">"channel_reserve_satoshis"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"close_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T11:06:50.261993+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"delayed_payment_base_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"dust_limit_satoshis"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"fee_rate_per_kw"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mtSJixJ8eCguXDAdkGGoQu3nG1n77a6td8"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_satoshis"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"htlc_base_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"htlc_minimum_msat"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"max_accepted_htlcs"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"max_htlc_value_in_flight_msat"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"payment_base_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"pub_key_a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"pub_key_b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"034094927aa69a96d82d7e67146cf9b8dcd775919d1373d5319454e6004c0cdf7a"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"push_msat"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"revocation_base_point"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">],</span><span class="w">
        </span><span class="s2">"to_self_delay"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>Bob sends request to his OBD instance, his OBD helps he complete the message, and routes his request to Carol&#39;s OBD for creating a channel between them. </p>

<p><strong>Message Type: -32</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>funding pubkey</td>
<td>-------</td>
<td>data</td>
<td>public key of funder, who wish to deposite BTC and other tokens to the channel</td>
</tr>
<tr>
<td>recipient_peer_id</td>
<td>-------</td>
<td>body</td>
<td>peer id of the fundee.</td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Response：</strong><br>
This response is simutanously sent to Bob&#39;s OBD. Response is a temporary_channel_id.</p>

<p><br/></p>

<p>Carol replies to accept, her OBD completes her message and routes it to Bob&#39;s OBD. Then Bob sees the response of acceptance. </p>

<p><strong>Message Type: -33</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>body</td>
<td>the temporary channel id, used before real funding completes.</td>
</tr>
<tr>
<td>funding pubkey</td>
<td>-------</td>
<td>body</td>
<td>public key of fundee(Bob), who wish to deposite BTC and other tokens to the channel. Current implementation of OBD supports one-way deposite. Fundee does not need to fund the channel.</td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>body</td>
<td>true or false to deny.</td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Response：</strong>
Same to above.</p>

<!-- ## Alice Deposit Assets to Channels A2B -->
<h2 id='alice-deposit-btc-to-channel-a2b-for-miner-fee'>Alice deposit BTC to channel A2B for miner fee</h2>
<!-- right -->

<blockquote>
<p>Alice send 1009 first:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">1009</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"from_address"</span><span class="p">:</span><span class="s2">"muYrqVWTKnkaVAMuqn59Ta6GL912ixpxit"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"from_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"to_address"</span><span class="p">:</span><span class="s2">"2NFhMhDJT9TsnBCG6L2amH3eDXxgwW6EJh7"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="s2">"miner_fee"</span><span class="p">:</span><span class="mf">0.00001</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1009</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000002634ad0a2468850f4bed537ffc2a28aa6395cb2c34efe54b321135bae298d5d79020000006a4730440220421bc0e7cbeaebb5ad7e0559d5be01f50143816243904bed8c4fe2972717ad0b02206bf8b4f3dc911b6e8c6748b248e6e59dd4b43e4b5a197379863040f374a979a10121029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3cffffffffe2fa86ac404f71b97e6b34010549a82c9f3ee1a150c54b7daec99c0da83f8482010000006a47304402207d52f8a36791ce26361809b9a7b9da4175bf3b5ad6004d6a46ecb4a329dfdb370220217c481b71bcafbf3e93fe72837c28e48f38474ea1341bae030867e37be5c08c0121029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3cffffffff02102700000000000017a914f64403be27af8af0a8abc21aed584b06f80adf30876a190f00000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b18aab6599f1661963763281c83ddd7f6de51813881b2ee563008c021d31fcd4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Alice send a notification to bob:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3400</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">],</span><span class="w">     </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="p">,</span><span class="w">       </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="s2">"0200000002634ad0a2468850f4bed537ffc2a28aa6395cb2c34efe54b321135bae298d5d79020000006a4730440220421bc0e7cbeaebb5ad7e0559d5be01f50143816243904bed8c4fe2972717ad0b02206bf8b4f3dc911b6e8c6748b248e6e59dd4b43e4b5a197379863040f374a979a10121029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3cffffffffe2fa86ac404f71b97e6b34010549a82c9f3ee1a150c54b7daec99c0da83f8482010000006a47304402207d52f8a36791ce26361809b9a7b9da4175bf3b5ad6004d6a46ecb4a329dfdb370220217c481b71bcafbf3e93fe72837c28e48f38474ea1341bae030867e37be5c08c0121029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3cffffffff02102700000000000017a914f64403be27af8af0a8abc21aed584b06f80adf30876a190f00000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac00000000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-3400</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b18aab6599f1661963763281c83ddd7f6de51813881b2ee563008c021d31fcd4"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3500</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">],</span><span class="w">     </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">       </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="s2">"b18aab6599f1661963763281c83ddd7f6de51813881b2ee563008c021d31fcd4"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-3500</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:05:52.1148727+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">],</span><span class="w">
        </span><span class="s2">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000001d4fc311d028c0063e52e1b881318e56d7fdd3dc8813276631966f19965ab8ab100000000d9004730440220167874a0697aeebb170adfd418cbab33a39a837099be4a829d8c71d4a1933e0c0220145afac21e206ed8b37e38aaa13788b91dc7819bc2caeb760c5b13fb62a34d820147304402201fcc09eff15e178704bcda267bcc221fa677ff3f9c0f04139a458696b121ef780220502e7ff9f919d4fe165f0b4abf39000779c7c49b47064b3c752db2668a81750601475221029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c2103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f52aeffffffff01581b0000000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17405cc66b345247ded162a21ecfbd98a6e9b85a6d2dfba32b2421b9670efe4f"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Alice send 1009 second:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">1009</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"from_address"</span><span class="p">:</span><span class="s2">"muYrqVWTKnkaVAMuqn59Ta6GL912ixpxit"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"from_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"to_address"</span><span class="p">:</span><span class="s2">"2NFhMhDJT9TsnBCG6L2amH3eDXxgwW6EJh7"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="s2">"miner_fee"</span><span class="p">:</span><span class="mf">0.00001</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1009</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000001d4fc311d028c0063e52e1b881318e56d7fdd3dc8813276631966f19965ab8ab1010000006a473044022000dbea4c6684f8d03571c57f3a37e9b7d51b4bebabc26eba062754bfafbed36502200bdf324eeba7c0ecb272e1ba3210a6f1aa17e1ddab9289caafa2414e6cd570180121029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3cffffffff02102700000000000017a914f64403be27af8af0a8abc21aed584b06f80adf308772ee0e00000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c657197ed731441da5ac13032707639039de15cf0d5f644e291c007c0f97b6d4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Alice send a notification to bob:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3400</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">],</span><span class="w">     </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="p">,</span><span class="w">       </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="s2">"0200000001d4fc311d028c0063e52e1b881318e56d7fdd3dc8813276631966f19965ab8ab1010000006a473044022000dbea4c6684f8d03571c57f3a37e9b7d51b4bebabc26eba062754bfafbed36502200bdf324eeba7c0ecb272e1ba3210a6f1aa17e1ddab9289caafa2414e6cd570180121029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3cffffffff02102700000000000017a914f64403be27af8af0a8abc21aed584b06f80adf308772ee0e00000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac00000000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-3400</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c657197ed731441da5ac13032707639039de15cf0d5f644e291c007c0f97b6d4"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3500</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">],</span><span class="w">     </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">       </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="s2">"c657197ed731441da5ac13032707639039de15cf0d5f644e291c007c0f97b6d4"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-3500</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:08:22.4007767+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">],</span><span class="w">
        </span><span class="s2">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000001d4b6970f7c001c294e645f0dcf15de39906307270313aca51d4431d77e1957c600000000d9004730440220276a1bec9fc2662c328911f8f0a8af59d56732e5ca62abb3a9ba3b67343967c102203ab6c8c47ffa39ba6013e4d36afd74b408c60d4c2e32c757ef68587f214c91860147304402200766a31cc399d4441fe41f3fbb6e7c8f0dc00b34b388309201e474298f6ffac202202f6e6cbf3c03ffbaa0fb92fed4637a9585b7b91e819f2b5a031bab255214c6f301475221029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c2103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f52aeffffffff01581b0000000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"70cd0630e5efcdedd699a950ff8c9391f8afd682fffcb90c25ef6453d5d477ec"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Alice send 1009 third:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">1009</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"from_address"</span><span class="p">:</span><span class="s2">"muYrqVWTKnkaVAMuqn59Ta6GL912ixpxit"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"from_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"to_address"</span><span class="p">:</span><span class="s2">"2NFhMhDJT9TsnBCG6L2amH3eDXxgwW6EJh7"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="s2">"miner_fee"</span><span class="p">:</span><span class="mf">0.00001</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1009</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000001d4b6970f7c001c294e645f0dcf15de39906307270313aca51d4431d77e1957c6010000006a473044022038611f8b4239633c53286d22a643f53ed9e280e90c49f6f6e88ccd31af34e08a02202d20172c87191dad26271ed26bdbdb7c410500a9cb24629fffb3253a2ffa9f190121029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3cffffffff02102700000000000017a914f64403be27af8af0a8abc21aed584b06f80adf30877ac30e00000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f13d17bdbf7e933c921621ae7abfa6d56d47cacced8aee77987c374a3e337fe4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Alice send a notification to bob:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3400</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">],</span><span class="w">     </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="p">,</span><span class="w">       </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="s2">"0200000001d4b6970f7c001c294e645f0dcf15de39906307270313aca51d4431d77e1957c6010000006a473044022038611f8b4239633c53286d22a643f53ed9e280e90c49f6f6e88ccd31af34e08a02202d20172c87191dad26271ed26bdbdb7c410500a9cb24629fffb3253a2ffa9f190121029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3cffffffff02102700000000000017a914f64403be27af8af0a8abc21aed584b06f80adf30877ac30e00000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac00000000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-3400</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f13d17bdbf7e933c921621ae7abfa6d56d47cacced8aee77987c374a3e337fe4"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>Bob replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3500</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">],</span><span class="w">     </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">       </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="s2">"f13d17bdbf7e933c921621ae7abfa6d56d47cacced8aee77987c374a3e337fe4"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-3500</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:09:51.4411834+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">],</span><span class="w">
        </span><span class="s2">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000001e47f333e4a377c9877ee8aedccca476dd5a6bf7aae2116923c937ebfbd173df100000000d900473044022015e42277609a892d988ed4662b5ed7a3ae2400fc9fa211cbf59447875d5de9b3022072c5e9c3322e497cc1c116c959233720ebd0587eb33206267e45c5361e2588e6014730440220327f8918baadec25dcd9780fcca5ef7eff78518c4aec3276d4a648ef71e1671f02200a2e7a6e1173feff589352bcbc880b7030ef78700f9e27320f45e1564bb972aa01475221029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c2103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f52aeffffffff01581b0000000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd75a9e21cbc6e4b972ac40c10f5246b77dd74724bbadd145a00eec3371c6b0"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><em>First deposit BTC for miner fee</em></p>

<p><strong>Message Type: 1009</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from_address</td>
<td>-------</td>
<td>data</td>
<td>address of funder, from where the BTC is transferred.</td>
</tr>
<tr>
<td>from_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key.</td>
</tr>
<tr>
<td>to_address</td>
<td>-------</td>
<td>data</td>
<td>the channel multi-sig address.</td>
</tr>
<tr>
<td>amount</td>
<td>0.0001</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>miner_fee</td>
<td>0.00001</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>hex</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>txid</td>
<td>-------</td>
<td>result</td>
<td>transaction id</td>
</tr>
</tbody></table>

<p><br/></p>

<p><em>Send a notification to bob</em></p>

<p><strong>Message Type: -3400</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key of the channel that Alice holds</td>
</tr>
<tr>
<td>funding_tx_hex</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>amount</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_txid</td>
<td>-------</td>
<td>result</td>
<td>funding transaction id</td>
</tr>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><em>Bob replies</em></p>

<p><strong>Message Type: -3500</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key of the channel that Bob holds</td>
</tr>
<tr>
<td>funding_txid</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>data</td>
<td>true or false</td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>owner</td>
<td>-------</td>
<td>result</td>
<td>the funder is the owner</td>
</tr>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>tx_hash</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><em>Second deposit BTC</em></p>

<p><strong>Message Type: 1009</strong></p>

<p>Parameters and OBD Responses same to above. </p>

<p><br/><br/><br/><br/><br/></p>

<p><em>Send a notification to bob</em></p>

<p><strong>Message Type: -3400</strong></p>

<p>Parameters and OBD Responses same to above. </p>

<p><br/></p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Bob replies</em></p>

<p><strong>Message Type: -3500</strong></p>

<p>Parameters and OBD Responses same to above. </p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Third deposit BTC</em></p>

<p><strong>Message Type: 1009</strong></p>

<p>Parameters and OBD Responses same to above. </p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Send a notification to bob</em></p>

<p><strong>Message Type: -3400</strong></p>

<p>Parameters and OBD Responses same to above. </p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Bob replies</em></p>

<p><strong>Message Type: -3500</strong></p>

<p>Parameters and OBD Responses same to above. </p>
<h2 id='alice-deposit-usdt-to-channel-a2b-for-transfer'>Alice deposit USDT to channel A2B for transfer</h2>
<!-- right -->

<blockquote>
<p>Alice send:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">2001</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"from_address"</span><span class="p">:</span><span class="s2">"muYrqVWTKnkaVAMuqn59Ta6GL912ixpxit"</span><span class="p">,</span><span class="w">            
        </span><span class="s2">"from_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"to_address"</span><span class="p">:</span><span class="s2">"2NFhMhDJT9TsnBCG6L2amH3eDXxgwW6EJh7"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span><span class="w">
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">2001</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000001e47f333e4a377c9877ee8aedccca476dd5a6bf7aae2116923c937ebfbd173df1010000006a47304402205d721941d28ec7a6a427d0da51cf89e70772548d0829b627919a3ebf8722e96a02207658e909db233dfa6d4ca4f1a3a08fc0325c045c519d2e0e8f6af56ea6e334f00121029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3cffffffff03a6b50e00000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac0000000000000000166a146f6d6e690000000000000079000000012a05f2001c0200000000000017a914f64403be27af8af0a8abc21aed584b06f80adf308700000000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Alice2&#39;s temp address data:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>address:  mq8t9iEHoYzw4EzByo9p1uCVBWDnFU4JwW
privkey:  cVBFoaRumDJYntRRV244KUj7kyrGauGhT6bZcf15xfhGCh9mAbVp
pubkey:   0380874d124f259b31ee8cf3256d784f0269ae9cf3b577e5c271c452572f8b28e5
</code></pre>
<blockquote>
<p>Alice send a notification to bob:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-34</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">68</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">176</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">163</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">239</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">94</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">252</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span><span class="mi">195</span><span class="p">,</span><span class="mi">221</span><span class="p">,</span><span class="mi">146</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">166</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">164</span><span class="p">],</span><span class="w">     </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="s2">"0200000001e47f333e4a377c9877ee8aedccca476dd5a6bf7aae2116923c937ebfbd173df1010000006a47304402205d721941d28ec7a6a427d0da51cf89e70772548d0829b627919a3ebf8722e96a02207658e909db233dfa6d4ca4f1a3a08fc0325c045c519d2e0e8f6af56ea6e334f00121029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3cffffffff03a6b50e00000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac0000000000000000166a146f6d6e690000000000000079000000012a05f2001c0200000000000017a914f64403be27af8af0a8abc21aed584b06f80adf308700000000"</span><span class="p">,</span><span class="w">    
        </span><span class="s2">"temp_address_pub_key"</span><span class="p">:</span><span class="s2">"0380874d124f259b31ee8cf3256d784f0269ae9cf3b577e5c271c452572f8b28e5"</span><span class="p">,</span><span class="w">        </span><span class="s2">"temp_address_private_key"</span><span class="p">:</span><span class="s2">"cVBFoaRumDJYntRRV244KUj7kyrGauGhT6bZcf15xfhGCh9mAbVp"</span><span class="p">,</span><span class="w">      </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-34</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount_a"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"amount_b"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">174</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mi">154</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">76</span><span class="p">,</span><span class="mi">58</span><span class="p">,</span><span class="mi">237</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">75</span><span class="p">],</span><span class="w">
        </span><span class="s2">"channel_info_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:17:15.1972409+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"fundee_sign_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funder_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"muYrqVWTKnkaVAMuqn59Ta6GL912ixpxit"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funder_pub_key_2_for_commitment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0380874d124f259b31ee8cf3256d784f0269ae9cf3b577e5c271c452572f8b28e5"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_output_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000001e47f333e4a377c9877ee8aedccca476dd5a6bf7aae2116923c937ebfbd173df1010000006a47304402205d721941d28ec7a6a427d0da51cf89e70772548d0829b627919a3ebf8722e96a02207658e909db233dfa6d4ca4f1a3a08fc0325c045c519d2e0e8f6af56ea6e334f00121029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3cffffffff03a6b50e00000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac0000000000000000166a146f6d6e690000000000000079000000012a05f2001c0200000000000017a914f64403be27af8af0a8abc21aed584b06f80adf308700000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"492be5f12083719e668a98fbcb531c42d8879c1151c93d20ed3a4c91679a24ae"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-35</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">174</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mi">154</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">76</span><span class="p">,</span><span class="mi">58</span><span class="p">,</span><span class="mi">237</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">75</span><span class="p">],</span><span class="w">      </span><span class="s2">"fundee_channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-35</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount_a"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"amount_b"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">174</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mi">154</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">76</span><span class="p">,</span><span class="mi">58</span><span class="p">,</span><span class="mi">237</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">75</span><span class="p">],</span><span class="w">
        </span><span class="s2">"channel_info_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:17:15.1972409+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"fundee_sign_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:18:19.6544966+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funder_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"muYrqVWTKnkaVAMuqn59Ta6GL912ixpxit"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funder_pub_key_2_for_commitment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0380874d124f259b31ee8cf3256d784f0269ae9cf3b577e5c271c452572f8b28e5"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_output_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000001e47f333e4a377c9877ee8aedccca476dd5a6bf7aae2116923c937ebfbd173df1010000006a47304402205d721941d28ec7a6a427d0da51cf89e70772548d0829b627919a3ebf8722e96a02207658e909db233dfa6d4ca4f1a3a08fc0325c045c519d2e0e8f6af56ea6e334f00121029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3cffffffff03a6b50e00000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac0000000000000000166a146f6d6e690000000000000079000000012a05f2001c0200000000000017a914f64403be27af8af0a8abc21aed584b06f80adf308700000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"492be5f12083719e668a98fbcb531c42d8879c1151c93d20ed3a4c91679a24ae"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><em>Deposit USDT for transfer to Bob</em></p>

<p><strong>Message Type: 2001</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from_address</td>
<td>-------</td>
<td>data</td>
<td>address of funder, from where the BTC is transferred.</td>
</tr>
<tr>
<td>from_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key.</td>
</tr>
<tr>
<td>to_address</td>
<td>-------</td>
<td>data</td>
<td>the channel multi-sig address.</td>
</tr>
<tr>
<td>amount</td>
<td>0.0001</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>data</td>
<td>the omni asset id that has been funding.</td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>hex</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>txid</td>
<td>-------</td>
<td>result</td>
<td>transaction id</td>
</tr>
</tbody></table>

<p><br/></p>

<p><em>Send a notification to bob</em></p>

<p><strong>Message Type: -34</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>temporary_channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>funding_tx_hex</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key of the channel that Alice holds</td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>amount_a</td>
<td>-------</td>
<td>result</td>
<td>how much has been funded</td>
</tr>
<tr>
<td>amount_b</td>
<td>-------</td>
<td>result</td>
<td>none required</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td>channel officially created</td>
</tr>
<tr>
<td>channel_info_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td>created by the funder</td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>fundee_sign_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funder_address</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funder_pub_key_2_for_commitment</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_output_index&quot;</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_tx_hex</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_txid</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_a</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_b</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><em>Bob replies</em></p>

<p><strong>Message Type: -35</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>fundee_channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key of the channel that Bob holds</td>
</tr>
<tr>
<td>funding_txid</td>
<td>-------</td>
<td>data</td>
<td>transaction id missing???</td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>data</td>
<td>true or false</td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>amount_a</td>
<td>-------</td>
<td>result</td>
<td>how much the funder deposited</td>
</tr>
<tr>
<td>amount_b</td>
<td>-------</td>
<td>result</td>
<td>none required</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>channel_info_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>fundee_sign_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funder_address</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funder_pub_key_2_for_commitment</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_output_index</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_tx_hex</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>funding_txid</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_a</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>

<!-- ## Bob Deposit Assets to Channels B2C -->
<h2 id='bob-deposit-btc-to-channel-b2c-for-miner-fee'>Bob deposit BTC to channel B2C for miner fee</h2>
<!-- right -->

<blockquote>
<p>Bob send 1009 first:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">1009</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"from_address"</span><span class="p">:</span><span class="s2">"mtSJixJ8eCguXDAdkGGoQu3nG1n77a6td8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"from_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"to_address"</span><span class="p">:</span><span class="s2">"2MzQW254vB6mHsUvLHxCnKZ73Gcw7kSrvsd"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="s2">"miner_fee"</span><span class="p">:</span><span class="mf">0.00001</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1009</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000001602db1aaf84e110d8a980ce6edabfd7dd6ff9e015c1386ccaeb0950e172d095d010000006a47304402205f58bfbaa958111bdc5cd3f2b7fef54345994f01390b5bedb7616a651cf06970022020caac0ad91031648b6276eeaee890137066c835253f48c32ae90d5be135946c012103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91fffffffff02102700000000000017a9144e8a01887f51a04610909ceaddb596fbfe109b8f8748170f00000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"af8797e691644774cd6bb93f527e1ddcdfb291412fa1fa64e96f5efdd50db660"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob send a notification to Carol:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3400</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">],</span><span class="w">     </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">       </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="s2">"0200000001602db1aaf84e110d8a980ce6edabfd7dd6ff9e015c1386ccaeb0950e172d095d010000006a47304402205f58bfbaa958111bdc5cd3f2b7fef54345994f01390b5bedb7616a651cf06970022020caac0ad91031648b6276eeaee890137066c835253f48c32ae90d5be135946c012103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91fffffffff02102700000000000017a9144e8a01887f51a04610909ceaddb596fbfe109b8f8748170f00000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac00000000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-3400</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"af8797e691644774cd6bb93f527e1ddcdfb291412fa1fa64e96f5efdd50db660"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Carol replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3500</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">],</span><span class="w">     </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cMxR8h9z5oKrdyuXVR9uzBbyyaJz1karxH1FW5xezhKzxQc7sCJV"</span><span class="p">,</span><span class="w">       </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="s2">"af8797e691644774cd6bb93f527e1ddcdfb291412fa1fa64e96f5efdd50db660"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-3500</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:28:56.0383895+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">],</span><span class="w">
        </span><span class="s2">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020000000160b60dd5fd5e6fe964faa12f4191b2dfdc1d7e523fb96bcd74476491e69787af00000000d900473044022003164086a5b474ddf75ebd878f49282cbae075667c5b23bd992c4a8c6dcdec1b02202d8d9f98a930c72fba0387cc0a352d81f1d61827e7ff9ac7e2974fd48f712c590147304402203ecde9676432a283864b74229d1b4c0922eabfa7086c66f4f3470fe09ca62a9602202806bd98359694c30296d5aba05c8b1a4ffa1d84105409f8e067c4c1cf4790f80147522103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f21034094927aa69a96d82d7e67146cf9b8dcd775919d1373d5319454e6004c0cdf7a52aeffffffff01581b0000000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"399b0ac5fb7d6ec736a9eca7c30830adcc38ce0dfe61615cb6085c71f206ace2"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob send 1009 second:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">1009</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"from_address"</span><span class="p">:</span><span class="s2">"mtSJixJ8eCguXDAdkGGoQu3nG1n77a6td8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"from_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"to_address"</span><span class="p">:</span><span class="s2">"2MzQW254vB6mHsUvLHxCnKZ73Gcw7kSrvsd"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="s2">"miner_fee"</span><span class="p">:</span><span class="mf">0.00001</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1009</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"020000000160b60dd5fd5e6fe964faa12f4191b2dfdc1d7e523fb96bcd74476491e69787af010000006a47304402204d0f507845d7ea2bf2d566c2808417bc47ae4d4f1f8f64826ef4429ae723444202201d73bbc627c6b5a862d8568b518190d03731437f24278b5142d460a172a1feac012103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91fffffffff02102700000000000017a9144e8a01887f51a04610909ceaddb596fbfe109b8f8750ec0e00000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3ac771c333ed4171a725cc6e554de66a937dafaaf087bed4bdb5927f219212ce"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob send a notification to Carol:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3400</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">],</span><span class="w">     </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">       </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="s2">"020000000160b60dd5fd5e6fe964faa12f4191b2dfdc1d7e523fb96bcd74476491e69787af010000006a47304402204d0f507845d7ea2bf2d566c2808417bc47ae4d4f1f8f64826ef4429ae723444202201d73bbc627c6b5a862d8568b518190d03731437f24278b5142d460a172a1feac012103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91fffffffff02102700000000000017a9144e8a01887f51a04610909ceaddb596fbfe109b8f8750ec0e00000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac00000000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-3400</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3ac771c333ed4171a725cc6e554de66a937dafaaf087bed4bdb5927f219212ce"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Carol replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3500</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">],</span><span class="w">     </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cMxR8h9z5oKrdyuXVR9uzBbyyaJz1karxH1FW5xezhKzxQc7sCJV"</span><span class="p">,</span><span class="w">       </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="s2">"3ac771c333ed4171a725cc6e554de66a937dafaaf087bed4bdb5927f219212ce"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-3500</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:30:36.8618003+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">],</span><span class="w">
        </span><span class="s2">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000001ce1292217f92b5bdd4be87f0aaaf7d936ae64d556ecc25a77141ed33c371c73a00000000d900473044022018b420fca2ed9a82a27ad4637a801accdde63ffc4804e372435ff735129d1d8d02202bde9712ccf41471972b97c09a67f3d3e8a9d9af2ad6f547d449f2065025c1420147304402207a4c07d9e4e9802aa0b55a960726e59a06ab27d75436445bcb8093b78d0277d502201bee2a6d14b192ba59258e8e3cdf81c8cbf874399d5bfe3aa4bb70e838971ab10147522103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f21034094927aa69a96d82d7e67146cf9b8dcd775919d1373d5319454e6004c0cdf7a52aeffffffff01581b0000000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f5c918df87d039de2d5747884a2ffce86de448b0a7e803870db75a737c8de4c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob send 1009 third:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">1009</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"from_address"</span><span class="p">:</span><span class="s2">"mtSJixJ8eCguXDAdkGGoQu3nG1n77a6td8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"from_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"to_address"</span><span class="p">:</span><span class="s2">"2MzQW254vB6mHsUvLHxCnKZ73Gcw7kSrvsd"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="s2">"miner_fee"</span><span class="p">:</span><span class="mf">0.00001</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1009</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000001ce1292217f92b5bdd4be87f0aaaf7d936ae64d556ecc25a77141ed33c371c73a010000006a4730440220381b2144239eff8636a0ead31719a178fc92f3acaf891b852533f81e8532dbfc02201b49cba9639dec92ea0499ca1c0c3e15761675d79a0059bec43167c7c66ff763012103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91fffffffff02102700000000000017a9144e8a01887f51a04610909ceaddb596fbfe109b8f8758c10e00000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aa94902e186168fcc293e597a5d5b56f4dec3a7fb16d4ed84c7d3530dea53388"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob send a notification to Carol:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3400</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">],</span><span class="w">     </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">       </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="s2">"0200000001ce1292217f92b5bdd4be87f0aaaf7d936ae64d556ecc25a77141ed33c371c73a010000006a4730440220381b2144239eff8636a0ead31719a178fc92f3acaf891b852533f81e8532dbfc02201b49cba9639dec92ea0499ca1c0c3e15761675d79a0059bec43167c7c66ff763012103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91fffffffff02102700000000000017a9144e8a01887f51a04610909ceaddb596fbfe109b8f8758c10e00000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac00000000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-3400</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aa94902e186168fcc293e597a5d5b56f4dec3a7fb16d4ed84c7d3530dea53388"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Carol replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-3500</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">],</span><span class="w">     </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cMxR8h9z5oKrdyuXVR9uzBbyyaJz1karxH1FW5xezhKzxQc7sCJV"</span><span class="p">,</span><span class="w">       </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="s2">"aa94902e186168fcc293e597a5d5b56f4dec3a7fb16d4ed84c7d3530dea53388"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-3500</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:32:04.058052+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">],</span><span class="w">
        </span><span class="s2">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02000000018833a5de30357d4cd84e6db17f3aec4d6fb5d5a597e593c2fc6861182e9094aa00000000d90047304402203e356be9b2b17b516c7ecf4aff3d8f62b4ea4e64081ba1a09fc636eb469e73b20220549f4dd8078303f8dce70f0989fe6a8218288598c87e5ced096230da04b8db140147304402203dce406a77df31c8f64650b95a9ffb2a7961983b8ef5dc663c326df624c0829402202ce9205d170c72e9d6d88a9a4dcf43892bd481c9f859c61d0783d8eb9a7165090147522103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f21034094927aa69a96d82d7e67146cf9b8dcd775919d1373d5319454e6004c0cdf7a52aeffffffff01581b0000000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"efb844c25f1a151034f1209b9bf039de178464da8e9f81562226e52044caaf25"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><em>First deposit BTC</em></p>

<p><strong>Message Type: 1009</strong></p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Send a notification to Carol</em></p>

<p><strong>Message Type: -3400</strong></p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Carol replies</em></p>

<p><strong>Message Type: -3500</strong></p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Second deposit BTC</em></p>

<p><strong>Message Type: 1009</strong></p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Send a notification to Carol</em></p>

<p><strong>Message Type: -3400</strong></p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Carol replies</em></p>

<p><strong>Message Type: -3500</strong></p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Third deposit BTC</em></p>

<p><strong>Message Type: 1009</strong></p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Send a notification to Carol</em></p>

<p><strong>Message Type: -3400</strong></p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Carol replies</em></p>

<p><strong>Message Type: -3500</strong></p>
<h2 id='bob-deposit-usdt-to-channel-b2c-for-transfer'>Bob deposit USDT to channel B2C for transfer</h2>
<!-- right -->

<blockquote>
<p>Bob send:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">2001</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"from_address"</span><span class="p">:</span><span class="s2">"mtSJixJ8eCguXDAdkGGoQu3nG1n77a6td8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"from_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"to_address"</span><span class="p">:</span><span class="s2">"2MzQW254vB6mHsUvLHxCnKZ73Gcw7kSrvsd"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span><span class="w">
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">2001</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02000000018833a5de30357d4cd84e6db17f3aec4d6fb5d5a597e593c2fc6861182e9094aa010000006a47304402207d3254f94e441a094b998751e67ef98159f06befc8af9917896d73433135c07f02200f5a2805771f1f4a0fd7ca8f5a1b97543de171b0a973f130cd499deded58d6e7012103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91fffffffff0384b30e00000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac0000000000000000166a146f6d6e69000000000000007900000000ee6b28001c0200000000000017a9144e8a01887f51a04610909ceaddb596fbfe109b8f8700000000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob2&#39;s temp address data:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>address:  muqmS2XAX91TvtrUmYnz8qCCTdgFq1mtdj
privkey:  cNzMo4uyZZHBEsxzfK6QRzVcshR5mjFLbwY9p1n921i6PQAewSBD
pubkey:   02759f5703ca8f229ae9815345eaf1cbb7acdd5dc67c49d49a2c6ce4b74c52bf0f
</code></pre>
<blockquote>
<p>Bob send a notification to Carol:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-34</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"temporary_channel_id"</span><span class="p">:[</span><span class="mi">26</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">121</span><span class="p">,</span><span class="mi">127</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">191</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">71</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">123</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">226</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">211</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">132</span><span class="p">,</span><span class="mi">153</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">86</span><span class="p">],</span><span class="w">     </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="s2">"02000000018833a5de30357d4cd84e6db17f3aec4d6fb5d5a597e593c2fc6861182e9094aa010000006a47304402207d3254f94e441a094b998751e67ef98159f06befc8af9917896d73433135c07f02200f5a2805771f1f4a0fd7ca8f5a1b97543de171b0a973f130cd499deded58d6e7012103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91fffffffff0384b30e00000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac0000000000000000166a146f6d6e69000000000000007900000000ee6b28001c0200000000000017a9144e8a01887f51a04610909ceaddb596fbfe109b8f8700000000"</span><span class="p">,</span><span class="w">    
        </span><span class="s2">"temp_address_pub_key"</span><span class="p">:</span><span class="s2">"02759f5703ca8f229ae9815345eaf1cbb7acdd5dc67c49d49a2c6ce4b74c52bf0f"</span><span class="p">,</span><span class="w">        </span><span class="s2">"temp_address_private_key"</span><span class="p">:</span><span class="s2">"cNzMo4uyZZHBEsxzfK6QRzVcshR5mjFLbwY9p1n921i6PQAewSBD"</span><span class="p">,</span><span class="w">      </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-34</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount_a"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"amount_b"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">223</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">75</span><span class="p">,</span><span class="mi">185</span><span class="p">,</span><span class="mi">186</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">47</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">247</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">183</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">72</span><span class="p">,</span><span class="mi">49</span><span class="p">,</span><span class="mi">233</span><span class="p">,</span><span class="mi">62</span><span class="p">,</span><span class="mi">65</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">172</span><span class="p">,</span><span class="mi">109</span><span class="p">,</span><span class="mi">51</span><span class="p">],</span><span class="w">
        </span><span class="s2">"channel_info_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:35:57.7498842+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"fundee_sign_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funder_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mtSJixJ8eCguXDAdkGGoQu3nG1n77a6td8"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funder_pub_key_2_for_commitment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02759f5703ca8f229ae9815345eaf1cbb7acdd5dc67c49d49a2c6ce4b74c52bf0f"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_output_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02000000018833a5de30357d4cd84e6db17f3aec4d6fb5d5a597e593c2fc6861182e9094aa010000006a47304402207d3254f94e441a094b998751e67ef98159f06befc8af9917896d73433135c07f02200f5a2805771f1f4a0fd7ca8f5a1b97543de171b0a973f130cd499deded58d6e7012103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91fffffffff0384b30e00000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac0000000000000000166a146f6d6e69000000000000007900000000ee6b28001c0200000000000017a9144e8a01887f51a04610909ceaddb596fbfe109b8f8700000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"316dac6f679c413ee93148bec0c5b73001c0f79e01f2ee919b2f16bab94bb1df"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Carol replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-35</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">223</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">75</span><span class="p">,</span><span class="mi">185</span><span class="p">,</span><span class="mi">186</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">47</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">247</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">183</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">72</span><span class="p">,</span><span class="mi">49</span><span class="p">,</span><span class="mi">233</span><span class="p">,</span><span class="mi">62</span><span class="p">,</span><span class="mi">65</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">172</span><span class="p">,</span><span class="mi">109</span><span class="p">,</span><span class="mi">51</span><span class="p">],</span><span class="w">      </span><span class="s2">"fundee_channel_address_private_key"</span><span class="p">:</span><span class="s2">"cMxR8h9z5oKrdyuXVR9uzBbyyaJz1karxH1FW5xezhKzxQc7sCJV"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-35</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount_a"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"amount_b"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">223</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">75</span><span class="p">,</span><span class="mi">185</span><span class="p">,</span><span class="mi">186</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">47</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">247</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">183</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">72</span><span class="p">,</span><span class="mi">49</span><span class="p">,</span><span class="mi">233</span><span class="p">,</span><span class="mi">62</span><span class="p">,</span><span class="mi">65</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">172</span><span class="p">,</span><span class="mi">109</span><span class="p">,</span><span class="mi">51</span><span class="p">],</span><span class="w">
        </span><span class="s2">"channel_info_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:35:57.7498842+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"fundee_sign_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T13:37:05.2307075+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funder_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mtSJixJ8eCguXDAdkGGoQu3nG1n77a6td8"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funder_pub_key_2_for_commitment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02759f5703ca8f229ae9815345eaf1cbb7acdd5dc67c49d49a2c6ce4b74c52bf0f"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_output_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_tx_hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02000000018833a5de30357d4cd84e6db17f3aec4d6fb5d5a597e593c2fc6861182e9094aa010000006a47304402207d3254f94e441a094b998751e67ef98159f06befc8af9917896d73433135c07f02200f5a2805771f1f4a0fd7ca8f5a1b97543de171b0a973f130cd499deded58d6e7012103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91fffffffff0384b30e00000000001976a9148db89be1a801f2b6d1f66703982dc1642a87f7af88ac0000000000000000166a146f6d6e69000000000000007900000000ee6b28001c0200000000000017a9144e8a01887f51a04610909ceaddb596fbfe109b8f8700000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"funding_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"316dac6f679c413ee93148bec0c5b73001c0f79e01f2ee919b2f16bab94bb1df"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><em>Deposit USDT for transfer to Carol</em></p>

<p><strong>Message Type: 2001</strong></p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Send a notification to Carol</em></p>

<p><strong>Message Type: -34</strong></p>

<p><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>

<p><em>Carol replies</em></p>

<p><strong>Message Type: -35</strong></p>
<h2 id='create-rsmc-commitment-transaction-between-alice-and-bob'>Create RSMC Commitment Transaction between Alice and Bob</h2>
<!-- right -->

<blockquote>
<p>Prepare Data:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>last_temp_address：     mq8t9iEHoYzw4EzByo9p1uCVBWDnFU4JwW
last_temp_private_key： cVBFoaRumDJYntRRV244KUj7kyrGauGhT6bZcf15xfhGCh9mAbVp

alice2 data
curr_temp_address：     moKypvXXnui8obVqFNcJkLGL9w483AqUvQ
curr_temp_private_key： cVsKRbL4ijWULmbU78nghKYL79GLYo7q9ccgmSR5c6zJWKfEEdJN
curr_temp_pub_key:      028cda5a6cadd592f8b8728b7842d7f5045609895eb27bc87ef8bbde3bdc6b96f3
</code></pre>
<blockquote>
<p>Alice launch the request:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-351</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">174</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mi">154</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">76</span><span class="p">,</span><span class="mi">58</span><span class="p">,</span><span class="mi">237</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">75</span><span class="p">],</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="mi">24</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"028cda5a6cadd592f8b8728b7842d7f5045609895eb27bc87ef8bbde3bdc6b96f3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cVsKRbL4ijWULmbU78nghKYL79GLYo7q9ccgmSR5c6zJWKfEEdJN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cVBFoaRumDJYntRRV244KUj7kyrGauGhT6bZcf15xfhGCh9mAbVp"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-351</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">174</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mi">154</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">76</span><span class="p">,</span><span class="mi">58</span><span class="p">,</span><span class="mi">237</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">75</span><span class="p">],</span><span class="w">
        </span><span class="s2">"curr_temp_address_private_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_temp_address_pub_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"028cda5a6cadd592f8b8728b7842d7f5045609895eb27bc87ef8bbde3bdc6b96f3"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"last_temp_address_private_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_commitment_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f290579190da44c3c9950c3322710ad7f8ea9287d9a6ebebb8284874bfcae50d"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob2&#39;s temp address data:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>last_temp_pub_key： 

Bob2
curr_temp_address：     mnVf4N8yur9bowFokfz8Ypn8C2kqNmp9Hg
curr_temp_private_key： cURFDvYsF49hazcGK3i4344H1r3pSjHwdqL2yQ85qxdzpub3rozx
curr_temp_pub_key：     02ef5cc2ab1dd7a840834991fcdf0554e59c550a7d5ff6934eff09c53099e5273b
</code></pre>
<blockquote>
<p>Bob replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-352</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">174</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mi">154</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">76</span><span class="p">,</span><span class="mi">58</span><span class="p">,</span><span class="mi">237</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">75</span><span class="p">],</span><span class="w">
        </span><span class="s2">"curr_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"02ef5cc2ab1dd7a840834991fcdf0554e59c550a7d5ff6934eff09c53099e5273b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cURFDvYsF49hazcGK3i4344H1r3pSjHwdqL2yQ85qxdzpub3rozx"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_temp_private_key"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"request_commitment_hash"</span><span class="p">:</span><span class="s2">"f290579190da44c3c9950c3322710ad7f8ea9287d9a6ebebb8284874bfcae50d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-352</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount_to_htlc"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"amount_to_other"</span><span class="p">:</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"amount_to_rsmc"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">174</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mi">154</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">76</span><span class="p">,</span><span class="mi">58</span><span class="p">,</span><span class="mi">237</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">75</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T14:37:47.5732+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1c7b75fd5db490b818113a2c67532b017dfa66c227a5c44b85b04afafb67ba71"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"htlc_h"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"htlc_multi_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"htlc_multi_address_script_pub_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"htlc_redeem_script"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"htlc_sender"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"htlc_temp_address_pub_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"htlc_tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"htlc_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"input_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"input_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"492be5f12083719e668a98fbcb531c42d8879c1151c93d20ed3a4c91679a24ae"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"input_vout"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"last_commitment_tx_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"last_edit_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T14:37:47.5732+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"last_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"rsmc_multi_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NCqpcN5cZXztLxnuojGDdfASVaiVUgNHms"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"rsmc_multi_address_script_pub_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a914d6f56f035723dab75cb42168a78c3950a51463f787"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"rsmc_redeem_script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"522102ef5cc2ab1dd7a840834991fcdf0554e59c550a7d5ff6934eff09c53099e5273b21029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c52ae"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"rsmc_temp_address_pub_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02ef5cc2ab1dd7a840834991fcdf0554e59c550a7d5ff6934eff09c53099e5273b"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"rsmc_tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000001d4b6970f7c001c294e645f0dcf15de39906307270313aca51d4431d77e1957c600000000d900473044022029b293c9a41afa157e40a8dc01cf1c37b36f0370e5f352d785637c3517f6987602206c65e2997645a52546aed3df51e3b3dc31b4f754dabf87d7e6575dabbc9ffb350147304402207f081c590e044cfd62eb61f0babff619451f2e2b97b5e84126a7e4ce606773730220032a6eb2e4a7f109886aa2253e80bfc9f44e4c55d6906ee1192323dd0c95785901475221029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c2103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f52aeffffffff033c1900000000000017a914d6f56f035723dab75cb42168a78c3950a51463f7870000000000000000166a146f6d6e690000000000000079000000008f0d18001c0200000000000017a914d6f56f035723dab75cb42168a78c3950a51463f78700000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"rsmc_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"79b9da6165f26514c311e9deb166c267a152d3b2739d1b6d20570524b470c530"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"send_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"sign_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T14:37:49.5936687+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"to_other_tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0200000003ae249a67914c3aed203dc951119c87d8421c53cbfb988a669e718320f1e52b4902000000d900473044022044bce17ff3e559eb261e58cfd74c75dcce484bca1e036383eccda0af585a867a022076f7c6ae5d115cb59e7346b700d4d5a3dbd0a1ff7b0ad25db0772300334061720147304402206135de8ec7b2d61a93425d07d13e811592d392ca5afd4bef7595f7edae7d7e85022025e2970a19bf19a6ade5e9a5a73d3a669648bbff17c6edf95795613d3229f72601475221029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c2103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f52aeffffffffd4fc311d028c0063e52e1b881318e56d7fdd3dc8813276631966f19965ab8ab100000000d90047304402201a7a29be4f434fa296ea25324d032eba37e468baf80af5acb7692e41c75f47f602203992ad31a27388025783752daa4b515ac4c9da70f0d2d11212c529b3d90519740147304402206abe4622ed65af415694e932050f671e1f9c11dcaa31afbc19d4bf85a2163baa022035b9a2272cd050b9a9dfa12f96cfec21c5c31b9fadf647ce6802fb519d2220dc01475221029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c2103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f52aeffffffffe47f333e4a377c9877ee8aedccca476dd5a6bf7aae2116923c937ebfbd173df100000000d900473044022017961e760fb5e9542d27453ab1e8c511189e49053290f5f1e95c8a1d33cdc67d022071e040e3d62c26b0c90b6e85e9d2c89f60ee90b51f5c935ace323cdafe58ab9601473044022017899dd5eab611e951beb18e2b5d5fc6403349c3f84db6a06bce8fae0e367c0e02207c673ff269dd43eb4aabcc8ad3b9b9a5aa67faaedccf9489dc121e4f51a5a0ee01475221029cf4b150da0065d5c08bf088e8a5367d35ff72e4e79b39efb401530d19fa3f3c2103da1b78a5ab4a5e4e13515e5104dbfc1d2d349d89039c15eda9c0118b7edaa91f52aeffffffff0362420000000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac0000000000000000166a146f6d6e690000000000000079000000009af8da0022020000000000001976a91499ee096d15bc8ae4ac8856a918ff2c4572877fa488ac00000000"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"to_other_txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6d7f75233f9ba125ee0c7bba31e910fd546703f89c2693298d4becf25096683c"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"tx_type"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><em>Alice transfer assets to Bob</em></p>

<p><strong>Message Type: -351</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>amount</td>
<td>-------</td>
<td>data</td>
<td>amount to pay</td>
</tr>
<tr>
<td>curr_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td>temporary multi-sig address</td>
</tr>
<tr>
<td>curr_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>the private key of the temporary multi-sig address currently in use.</td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>data</td>
<td>the omni asset id that has been funding.</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>Alice&#39;s private key of the channel</td>
</tr>
<tr>
<td>last_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>the private key of the last temporary multi-sig address</td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>amount</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>curr_temp_address_private_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>curr_temp_address_pub_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>last_temp_address_private_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>request_commitment_hash</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><em>Bob replies</em></p>

<p><strong>Message Type: -352</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td>to be added</td>
</tr>
<tr>
<td>curr_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>to be added</td>
</tr>
<tr>
<td>last_temp_private_key</td>
<td>-------</td>
<td>data</td>
<td>to be added</td>
</tr>
<tr>
<td>request_commitment_hash</td>
<td>-------</td>
<td>data</td>
<td>to be added</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td>private key of the channel that Bob holds</td>
</tr>
</tbody></table>

<p>approval</p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>amount_b</td>
<td>-------</td>
<td>result</td>
<td>how much has been payed</td>
</tr>
<tr>
<td>amount_m</td>
<td>-------</td>
<td>result</td>
<td>the balance of the sender</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td>channel officially created</td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td>created by the funder</td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>input_amount</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>input_txid</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>input_vout</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>last_commitment_tx_id</td>
<td>-------</td>
<td>result</td>
<td>to be added</td>
</tr>
<tr>
<td>last_edit_time</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>last_hash</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>multi_address</td>
<td>-------</td>
<td>result</td>
<td>to be added</td>
</tr>
<tr>
<td>owner</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_a</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_b</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>redeem_script</td>
<td>-------</td>
<td>result</td>
<td>to be added</td>
</tr>
<tr>
<td>script_pub_key</td>
<td>-------</td>
<td>result</td>
<td>to be added</td>
</tr>
<tr>
<td>send_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>sign_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>temp_address_pub_key</td>
<td>-------</td>
<td>result</td>
<td>to be added</td>
</tr>
<tr>
<td>transaction_sign_hex_to_other</td>
<td>-------</td>
<td>result</td>
<td>to be added</td>
</tr>
</tbody></table>
<h2 id='launch-a-htlc'>Launch a HTLC</h2>
<!-- right -->

<blockquote>
<p>Alice launch a request to transfer to Carol:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-40</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"recipient_peer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-40</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Carol send H to Alice:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-41</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-41</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"83519233492eb05ddd547757f2c3d151ad9392b2ebf48fc1a88e07e61dd82a45"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>We will launch a HTLC (Hashed Timelock Contract) transfer for testing purpose. 
It tests Alice transfer assets to Carol through Bob (middleman).</p>

<p>a) There IS NOT a direct channel between Alice and Carol.</p>

<p>b) There is a direct channel between Alice and Bob.</p>

<p>c) There is a direct channel between Bob and Carol.</p>

<p><br/></p>

<p><em>Alice launch a request to transfer to Carol</em></p>

<p><strong>Message Type: -40</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>property_id</td>
<td>-------</td>
<td>data</td>
<td>assets id</td>
</tr>
<tr>
<td>amount</td>
<td>-------</td>
<td>data</td>
<td>amount of transfer</td>
</tr>
<tr>
<td>recipient_peer_id</td>
<td>-------</td>
<td>data</td>
<td>peer id of receiever</td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>amount</td>
<td>-------</td>
<td>result</td>
<td>amount of transfer</td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>result</td>
<td>true or false</td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>result</td>
<td>assets id</td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>

<p><br/></p>

<p>Carol receieved request from Alice, and Carol generate a preimage R as a secret.</p>

<p>Carol send H (Hash of the preimage R) to Alice. Alice will looking for a middleman
that can transfer assets directly to Carol. Alice will tell the middleman if can 
produce to Alice an unknown 20-byte random input data R from a known hash H, 
within three days, then Alice will settle the contract by paying the middleman assets.</p>

<p><br/></p>

<p><em>Carol send H (Hash_Preimage_R) to Alice</em></p>

<p><strong>Message Type: -41</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>data</td>
<td>hash of this HTLC request</td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>data</td>
<td>assets id</td>
</tr>
<tr>
<td>amount</td>
<td>-------</td>
<td>data</td>
<td>amount of transfer</td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>data</td>
<td>true or false</td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>result</td>
<td>true or false</td>
</tr>
<tr>
<td>h</td>
<td>-------</td>
<td>result</td>
<td>Hash_Preimage_R</td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>
<h2 id='alice-looking-for-a-path-to-transfer-to-carol-and-send-h-to-bob'>Alice looking for a path to transfer to Carol and Send H to Bob</h2>
<!-- right -->

<blockquote>
<p>Alice send H to Bob:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-42</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"h"</span><span class="p">:</span><span class="s2">"83519233492eb05ddd547757f2c3d151ad9392b2ebf48fc1a88e07e61dd82a45"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-42</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"83519233492eb05ddd547757f2c3d151ad9392b2ebf48fc1a88e07e61dd82a45"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob&#39;s temp address data for create HTLC commitment transactions:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>Bob RSMC
address:  mqtffoYNN7J3pZnkeVgoXfpQ1pz11ZuyX2
privkey:  cN3o7Se2qcSq7Z3wYL9DLxn1cr5Du5rmmxsQeoeF6LC7yXcZZotN
pubkey:   03c5d2756dea6d6259080d7e1ab3f8597e7e9a83b5667eff70ea49ca3addb6f293

Bob HTLC
address:  mnznzruCDWz3QQUCw4wvC3NoNup2kdTdkU
privkey:  cPRy5pB8Ek2DabfQ74x8giqDdPtwTvptgRnq8qEP7KduzdmMFmJM
pubkey:   03d2edfe1f0a527f70473dbacb386e4e6a9cc0ea0cabf71f6c0a3dd516a8e6099f
</code></pre>
<blockquote>
<p>Bob replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-44</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cURFDvYsF49hazcGK3i4344H1r3pSjHwdqL2yQ85qxdzpub3rozx"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"03c5d2756dea6d6259080d7e1ab3f8597e7e9a83b5667eff70ea49ca3addb6f293"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cN3o7Se2qcSq7Z3wYL9DLxn1cr5Du5rmmxsQeoeF6LC7yXcZZotN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"03d2edfe1f0a527f70473dbacb386e4e6a9cc0ea0cabf71f6c0a3dd516a8e6099f"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cPRy5pB8Ek2DabfQ74x8giqDdPtwTvptgRnq8qEP7KduzdmMFmJM"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-44</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Alice&#39;s temp address data for create HTLC commitment transactions:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>Alice RSMC
address  mmvTaVWx9EtwRHMkmhLbZF2JBGZc12ym2o
privkey cSYJ3vwcgMPDqegXFJ2YgCYNNgKS9tNxCaRkZnn3ourQSdGNkJCk
pubkey 03dab6d7b005e8b15a2dc8d7005b45111876813c24a54ff15316a76ba376cf020f

Alice HTLC
address  mtj8ChNcwkJi3ktB4apPTakknpDdiErTDX
privkey cR7wXNwPjMrDCpnJoinTiMK384YyKNTfyctLQ2CCdQobdanEqgAs
pubkey 03d16de84b72460055b18e6d572b49c4ab0e1d889c0bf0705becb22e16b65ca916

Alice HTna
address  mvYRwC7zTVhxNWeEgnUrdazMERvbP2yZpP
privkey cNzNyejXtgC4ySXCVXqa6egVinYLDtGhkRkGd271ZW6AJrVKYZ2w
pubkey 030cb3034f7374d5bb614e27169df99d346748a1a7a365a27b1138f5db7ad2b0f3
</code></pre>
<blockquote>
<p>Alice create HTLC commitment transactions:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-45</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cVsKRbL4ijWULmbU78nghKYL79GLYo7q9ccgmSR5c6zJWKfEEdJN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"03dab6d7b005e8b15a2dc8d7005b45111876813c24a54ff15316a76ba376cf020f"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cSYJ3vwcgMPDqegXFJ2YgCYNNgKS9tNxCaRkZnn3ourQSdGNkJCk"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"03d16de84b72460055b18e6d572b49c4ab0e1d889c0bf0705becb22e16b65ca916"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cR7wXNwPjMrDCpnJoinTiMK384YyKNTfyctLQ2CCdQobdanEqgAs"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_for_ht1a_pub_key"</span><span class="p">:</span><span class="s2">"030cb3034f7374d5bb614e27169df99d346748a1a7a365a27b1138f5db7ad2b0f3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_for_ht1a_private_key"</span><span class="p">:</span><span class="s2">"cNzNyejXtgC4ySXCVXqa6egVinYLDtGhkRkGd271ZW6AJrVKYZ2w"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-45</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e7626f2b7207006d6515399c587c09c3bfb5ed3b12f63c12b0d40e634f9dd9a3"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"h_and_r_info_request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1fe82bc9152741670c4ee2b4853df9346c1cc63fce6d1c896e7eeca8cc62c9d9"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>Alice will looking for a path to reach Carol by pathfinding algorithm.
For testing purpose now, there is three client Alice, Bob, Carol, and 
they are all connected to an OBD server. </p>

<p>The real situation should be that a network of many OBD servers is 
spread all over the world, a large number of clients are connected 
to these OBDs, and then we need to find the shortest path to transfer 
assets from one client to another.</p>

<p><br/></p>

<p><em>Alice found a path and launch a request to middleman Bob</em></p>

<p><em>Alice send H to Bob</em></p>

<p><strong>Message Type: -42</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>h</td>
<td>-------</td>
<td>data</td>
<td>Hash of the preimage R</td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>h</td>
<td>-------</td>
<td>result</td>
<td>Hash of the preimage R</td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>

<p><br/></p>

<p>Bob (middleman) receieved request from Alice and agree.</p>

<p><em>Bob replies</em></p>

<p><strong>Message Type: -44</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>data</td>
<td>hash of this HTLC request</td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>data</td>
<td>true or false</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>result</td>
<td>true or false</td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>

<p><br/></p>

<p>Bob agree request, Alice create related commitment transactions between Alice and Bob.</p>

<p><em>Alice create HTLC commitment transactions</em></p>

<p><strong>Message Type: -45</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>data</td>
<td>hash of this HTLC request</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_for_ht1a_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_for_ht1a_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>h</td>
<td>-------</td>
<td>result</td>
<td>Hash of the preimage R</td>
</tr>
<tr>
<td>h_and_r_info_request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>
<h2 id='bob-send-h-to-carol-through-the-path'>Bob Send H to Carol through the Path</h2>
<!-- right -->

<blockquote>
<p>Bob (middleman) Send H to Carol (destination):</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-43</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"h"</span><span class="p">:</span><span class="s2">"83519233492eb05ddd547757f2c3d151ad9392b2ebf48fc1a88e07e61dd82a45"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"h_and_r_info_request_hash"</span><span class="p">:</span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-43</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e7626f2b7207006d6515399c587c09c3bfb5ed3b12f63c12b0d40e634f9dd9a3"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1fe82bc9152741670c4ee2b4853df9346c1cc63fce6d1c896e7eeca8cc62c9d9"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Carol&#39;s temp address data for create HTLC commitment transactions:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>Carol RSMC
address  mwFhZchMtq4y9jSvmkAaoyAve1vZ4gfCvB
privkey cTTFKJ3N8W4qHcpwj19NVVaEYAXBxf8DmBj9g7owLTWQ3mXXfD51
pubkey 03dd26ec67e15bde83b527be45a1c64f420821ba78ebc5eb9d3fe1a8ae3cd1f6d9

Carol HTLC
address  mmsNgwiBhJLcv7Pup7gvsNKg82ECcLMjdF
privkey cVW35aEjd56ZFHTSDtq9iUzHAfH6rWGVJcmYBn9QEp9ygSfkgZeG
pubkey 03e96c6692bef50af7c6c777ff1bd65b1134d18c98be801e00f8e6247db65950b8
</code></pre>
<blockquote>
<p>Carol replies:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-44</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cMxR8h9z5oKrdyuXVR9uzBbyyaJz1karxH1FW5xezhKzxQc7sCJV"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_temp_address_private_key"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"03dd26ec67e15bde83b527be45a1c64f420821ba78ebc5eb9d3fe1a8ae3cd1f6d9"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cTTFKJ3N8W4qHcpwj19NVVaEYAXBxf8DmBj9g7owLTWQ3mXXfD51"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"03e96c6692bef50af7c6c777ff1bd65b1134d18c98be801e00f8e6247db65950b8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cVW35aEjd56ZFHTSDtq9iUzHAfH6rWGVJcmYBn9QEp9ygSfkgZeG"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-44</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"approval"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob&#39;s temp address data for create HTLC commitment transactions:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>Bob RSMC
address  mxHpHW9Sc7JByG3m9nmjC77jexKcMe8mwi
privkey cTMZ3csaDWvods2jnMkNJZpz98DRWmFQXb4C1vDFTibcST5g3SNb
pubkey 033c6284ac5c2409cbf2a49103ff05715f5a0497a0490cdc038248ba37c10e8ccb

Bob HTLC
address  mqkWnkNfhUR7niBVehuBfdXDmhHCL71ohG
privkey cNon6RZ9uLq6EPpGYt8tDZjQLMWVZDAXcrFy3LH1ZmHQJDbKWnye
pubkey 025c7cab6f5724a507ad7268bfb6820a3b6902b09a99e1b37241a6b8ede33cc2f1

Bob HTnb
address  mzQmxkY35FaXfzDKyTQPWzxG7k3vZJqkeP
privkey cUoDGr5cdNarcv43YXFdXBY2zf9721y6u6MiDnk56TSJWCGKvTbL
pubkey 02977ddeffc04ac0c99c74db308a4db39e60b338d99f3d1661f5ae24f3e17ad414
</code></pre>
<blockquote>
<p>Bob create HTLC commitment transactions:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-45</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cNzMo4uyZZHBEsxzfK6QRzVcshR5mjFLbwY9p1n921i6PQAewSBD"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"033c6284ac5c2409cbf2a49103ff05715f5a0497a0490cdc038248ba37c10e8ccb"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cTMZ3csaDWvods2jnMkNJZpz98DRWmFQXb4C1vDFTibcST5g3SNb"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"025c7cab6f5724a507ad7268bfb6820a3b6902b09a99e1b37241a6b8ede33cc2f1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cNon6RZ9uLq6EPpGYt8tDZjQLMWVZDAXcrFy3LH1ZmHQJDbKWnye"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_for_ht1a_pub_key"</span><span class="p">:</span><span class="s2">"02977ddeffc04ac0c99c74db308a4db39e60b338d99f3d1661f5ae24f3e17ad414"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_for_ht1a_private_key"</span><span class="p">:</span><span class="s2">"cUoDGr5cdNarcv43YXFdXBY2zf9721y6u6MiDnk56TSJWCGKvTbL"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-45</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e7626f2b7207006d6515399c587c09c3bfb5ed3b12f63c12b0d40e634f9dd9a3"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"h_and_r_info_request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1fe82bc9152741670c4ee2b4853df9346c1cc63fce6d1c896e7eeca8cc62c9d9"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>Setp 2 of the path, Bob (middleman) has got the H and send it to Carol. </p>

<p>That&#39;s mean if Carol can produce to Bob an unknown 20-byte random input 
data R from a known hash H, within two days, then Bob will settle the 
contract by paying Carol assets.</p>

<p><br/></p>

<p><em>Bob (middleman) Send H to Carol (destination)</em></p>

<p><strong>Message Type: -43</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>h</td>
<td>-------</td>
<td>data</td>
<td>Hash of the preimage R</td>
</tr>
<tr>
<td>h_and_r_info_request_hash</td>
<td>-------</td>
<td>data</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>h</td>
<td>-------</td>
<td>result</td>
<td>Hash of the preimage R</td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>

<p><br/></p>

<p>Carol (destination) receieved request from Bob and agree.</p>

<p><em>Carol replies</em></p>

<p><strong>Message Type: -44</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>data</td>
<td>hash of this HTLC request</td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>data</td>
<td>true or false</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>approval</td>
<td>-------</td>
<td>result</td>
<td>true or false</td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>

<p><br/></p>

<p>Carol agree request, Bob create related commitment transactions between Bob and Carol.</p>

<p><em>Bob create HTLC commitment transactions</em></p>

<p><strong>Message Type: -45</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>data</td>
<td>hash of this HTLC request</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_for_ht1a_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_for_ht1a_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>h</td>
<td>-------</td>
<td>result</td>
<td>Hash of the preimage R</td>
</tr>
<tr>
<td>h_and_r_info_request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>
<h2 id='carol-send-r-to-bob-through-the-path'>Carol Send R to Bob through the Path</h2>
<!-- right -->

<blockquote>
<p>Carol&#39;s temp address data for create HTLC commitment transactions:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>Carol HTLC HEnb commitment transaction:

address  mt3esQqTd8udMNQK8Vm8EDka2N3uCdquCa
privkey cR14XVjQ4yXunTnpqXZ1FMangq5bZNqsQ4gnsVpJ1KAMkxZVqo3F
pubkey 020eaa8f0c0f2761215af43dd7fccb11df8cafffcff4e8f186bd1b8a8a11e5f680
</code></pre>
<blockquote>
<p>Carol (destination) Send R (Preimage_R) to Bob (middleman):</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-46</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"r"</span><span class="p">:</span><span class="s2">"d77d7df74ca33a672802387fffc6575a09dc7c45"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cMxR8h9z5oKrdyuXVR9uzBbyyaJz1karxH1FW5xezhKzxQc7sCJV"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cVW35aEjd56ZFHTSDtq9iUzHAfH6rWGVJcmYBn9QEp9ygSfkgZeG"</span><span class="p">,</span><span class="w">        
        </span><span class="s2">"curr_htlc_temp_address_for_he1b_pub_key"</span><span class="p">:</span><span class="s2">"020eaa8f0c0f2761215af43dd7fccb11df8cafffcff4e8f186bd1b8a8a11e5f680"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_for_he1b_private_key"</span><span class="p">:</span><span class="s2">"cR14XVjQ4yXunTnpqXZ1FMangq5bZNqsQ4gnsVpJ1KAMkxZVqo3F"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-46</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"r"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2de142c8006a3462241e96a610b59f3d92d8259c"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1fe82bc9152741670c4ee2b4853df9346c1cc63fce6d1c896e7eeca8cc62c9d9"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob replies and create rest HTLC commitment transactions:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-47</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"r"</span><span class="p">:</span><span class="s2">"d77d7df74ca33a672802387fffc6575a09dc7c45"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cNon6RZ9uLq6EPpGYt8tDZjQLMWVZDAXcrFy3LH1ZmHQJDbKWnye"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-47</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"r"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2de142c8006a3462241e96a610b59f3d92d8259c"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1fe82bc9152741670c4ee2b4853df9346c1cc63fce6d1c896e7eeca8cc62c9d9"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>So, from previous step (Setp 2), Bob ask Carol if Carol can produce to Bob an unknown 20-byte random input data R from a known hash H, within two days, then Bob will settle the contract by paying assets.</p>

<p>Of course Carol has the preimage R, because she generated it. Then now, Carol send R to Bob.</p>

<p><br/></p>

<p><em>Carol (destination) Send R (Preimage_R) to Bob (middleman)</em></p>

<p><strong>Message Type: -46</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>data</td>
<td>hash of this HTLC request</td>
</tr>
<tr>
<td>r</td>
<td>-------</td>
<td>data</td>
<td>Preimage_R</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_for_he1b_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_for_he1b_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>r</td>
<td>-------</td>
<td>result</td>
<td>Preimage_R</td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>

<p><br/></p>

<p>Bob receieved the R, and check out if R is correct.
If correct, then create rest HTLC commitment transactions.</p>

<p><em>Bob replies and create rest HTLC commitment transactions.</em></p>

<p><strong>Message Type: -47</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>data</td>
<td>hash of this HTLC request</td>
</tr>
<tr>
<td>r</td>
<td>-------</td>
<td>data</td>
<td>Preimage_R</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>r</td>
<td>-------</td>
<td>result</td>
<td>Preimage_R</td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>
<h2 id='bob-send-r-to-alice-through-the-path'>Bob Send R to Alice through the Path</h2>
<!-- right -->

<blockquote>
<p>Bob&#39;s temp address data for create rest HTLC commitment transactions:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>Bob HTLC HEnb commitment transaction:

address  mhDr57jhEWeYg2eYQf7LYHoxZ8ZgXEunaT
privkey cTeQ2e9Hw6y1RHjCCF9x3MR7pn3yPySgxSYy5rtvmVvM7ZNh9jUZ
pubkey 03ebdfc067f822e9ae0d76759c422bfd3aee342e21ca716dc16b81b335da73d69e
</code></pre>
<blockquote>
<p>Bob (middleman) Send R (Preimage_R) to Alice (launcher):</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-46</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"r"</span><span class="p">:</span><span class="s2">"d77d7df74ca33a672802387fffc6575a09dc7c45"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cPRy5pB8Ek2DabfQ74x8giqDdPtwTvptgRnq8qEP7KduzdmMFmJM"</span><span class="p">,</span><span class="w">        
        </span><span class="s2">"curr_htlc_temp_address_for_he1b_pub_key"</span><span class="p">:</span><span class="s2">"03ebdfc067f822e9ae0d76759c422bfd3aee342e21ca716dc16b81b335da73d69e"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_for_he1b_private_key"</span><span class="p">:</span><span class="s2">"cTeQ2e9Hw6y1RHjCCF9x3MR7pn3yPySgxSYy5rtvmVvM7ZNh9jUZ"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-46</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"r"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2de142c8006a3462241e96a610b59f3d92d8259c"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1fe82bc9152741670c4ee2b4853df9346c1cc63fce6d1c896e7eeca8cc62c9d9"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Alice replies and create rest HTLC commitment transactions:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-47</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"r"</span><span class="p">:</span><span class="s2">"d77d7df74ca33a672802387fffc6575a09dc7c45"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_htlc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cR7wXNwPjMrDCpnJoinTiMK384YyKNTfyctLQ2CCdQobdanEqgAs"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-47</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"r"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2de142c8006a3462241e96a610b59f3d92d8259c"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1fe82bc9152741670c4ee2b4853df9346c1cc63fce6d1c896e7eeca8cc62c9d9"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>Bob send R to Alice, and Alice will create rest HTLC commitment transactions to pay assets to Bob.</p>

<p><em>Bob (middleman) Send R (Preimage_R) to Alice (launcher)</em></p>

<p><strong>Message Type: -46</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>data</td>
<td>hash of this HTLC request</td>
</tr>
<tr>
<td>r</td>
<td>-------</td>
<td>data</td>
<td>Preimage_R</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_for_he1b_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_for_he1b_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>r</td>
<td>-------</td>
<td>result</td>
<td>Preimage_R</td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>

<p><br/></p>

<p>Alice receieved the R, and check out if R is correct.
If correct, then create rest HTLC commitment transactions.</p>

<p><em>Alice replies and create rest HTLC commitment transactions.</em></p>

<p><strong>Message Type: -47</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>data</td>
<td>hash of this HTLC request</td>
</tr>
<tr>
<td>r</td>
<td>-------</td>
<td>data</td>
<td>Preimage_R</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_htlc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>r</td>
<td>-------</td>
<td>result</td>
<td>Preimage_R</td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>
<h2 id='close-htlc'>Close HTLC</h2>
<!-- right -->

<blockquote>
<p>Alice&#39;s temp address data for create commitment transactions:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>Alice RSMC 
address  mkPtXTRyA53ddhknMnVqNCDdeN2FsXmtwe
privkey cTiDwaM3y5LE2HuWWgvRTC9mgHiovf2zntjSgCPyLLeuUTmKk1BY
pubkey 02fed65567b2ab00e2cbb28b46a687ce8fd0894486989cba54975b45bbc6a85ed8
</code></pre>
<blockquote>
<p>Alice launch a request to close HTLC channel A2B:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-48</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">174</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mi">154</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">76</span><span class="p">,</span><span class="mi">58</span><span class="p">,</span><span class="mi">237</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">75</span><span class="p">],</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_rsmc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cSYJ3vwcgMPDqegXFJ2YgCYNNgKS9tNxCaRkZnn3ourQSdGNkJCk"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_htlc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cR7wXNwPjMrDCpnJoinTiMK384YyKNTfyctLQ2CCdQobdanEqgAs"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_htlc_temp_address_for_htnx_private_key"</span><span class="p">:</span><span class="s2">"cNzNyejXtgC4ySXCVXqa6egVinYLDtGhkRkGd271ZW6AJrVKYZ2w"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"02fed65567b2ab00e2cbb28b46a687ce8fd0894486989cba54975b45bbc6a85ed8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cTiDwaM3y5LE2HuWWgvRTC9mgHiovf2zntjSgCPyLLeuUTmKk1BY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-48</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">174</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mi">154</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">76</span><span class="p">,</span><span class="mi">58</span><span class="p">,</span><span class="mi">237</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">201</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">216</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">251</span><span class="p">,</span><span class="mi">152</span><span class="p">,</span><span class="mi">138</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">131</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">241</span><span class="p">,</span><span class="mi">229</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">75</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-06T08:45:40.4120228+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_rsmc_temp_address_pub_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02fed65567b2ab00e2cbb28b46a687ce8fd0894486989cba54975b45bbc6a85ed8"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fa6cdcd0974eeabbeffca3d70d0a66cd7549b002de7cd56eee1c7e60b94dc0be"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob&#39;s temp address data for create commitment transactions:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>Bob RSMC 
address  n2wKQgrfM5fFXmmA6xNWjWPPFPktJHnqEj
privkey cU78aif2a4YR5xK8HxBTrPKjdjhD8W4SSZNTw4yFEdwi59JMrYQY
pubkey 0298bdca47bbb76b1022eb7d18534961a12ce6dd80308c839576602b771e324fba
</code></pre>
<blockquote>
<p>Bob replies and create BR &amp; a newer commitment transactions:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-49</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"request_close_htlc_hash"</span><span class="p">:</span><span class="s2">"fa6cdcd0974eeabbeffca3d70d0a66cd7549b002de7cd56eee1c7e60b94dc0be"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cToieuvo3JjkEUKa3tjd6J98RXKDTo1d2hUSVgKpZ1KwBvGhQFL8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_rsmc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_htlc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cPRy5pB8Ek2DabfQ74x8giqDdPtwTvptgRnq8qEP7KduzdmMFmJM"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_htlc_temp_address_for_htnx_private_key"</span><span class="p">:</span><span class="s2">"cTeQ2e9Hw6y1RHjCCF9x3MR7pn3yPySgxSYy5rtvmVvM7ZNh9jUZ"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"0298bdca47bbb76b1022eb7d18534961a12ce6dd80308c839576602b771e324fba"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cU78aif2a4YR5xK8HxBTrPKjdjhD8W4SSZNTw4yFEdwi59JMrYQY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-49</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"close htlc success"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Carol&#39;s temp address data for create commitment transactions:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>Carol RSMC 
address  mrWGmCyzEQxKWmBQoGmKDSH9Avo7yb6Vz6
privkey cNDBq3ZKKQEduVyygfcQRzxbhTS3Gt2zz6VEizkp6WyRXn8RdBtH
pubkey 03080445b531e1df053ce9f1e3d01cdf679f693b23a991ce74145cb0b2e29a2b2d
</code></pre>
<blockquote>
<p>Carol launch a request to close HTLC channel B2C:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-48</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">223</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">75</span><span class="p">,</span><span class="mi">185</span><span class="p">,</span><span class="mi">186</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">47</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">247</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">183</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">72</span><span class="p">,</span><span class="mi">49</span><span class="p">,</span><span class="mi">233</span><span class="p">,</span><span class="mi">62</span><span class="p">,</span><span class="mi">65</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">172</span><span class="p">,</span><span class="mi">109</span><span class="p">,</span><span class="mi">51</span><span class="p">],</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cMxR8h9z5oKrdyuXVR9uzBbyyaJz1karxH1FW5xezhKzxQc7sCJV"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_rsmc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cTTFKJ3N8W4qHcpwj19NVVaEYAXBxf8DmBj9g7owLTWQ3mXXfD51"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_htlc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cVW35aEjd56ZFHTSDtq9iUzHAfH6rWGVJcmYBn9QEp9ygSfkgZeG"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_htlc_temp_address_for_htnx_private_key"</span><span class="p">:</span><span class="s2">"cR14XVjQ4yXunTnpqXZ1FMangq5bZNqsQ4gnsVpJ1KAMkxZVqo3F"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"03080445b531e1df053ce9f1e3d01cdf679f693b23a991ce74145cb0b2e29a2b2d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cNDBq3ZKKQEduVyygfcQRzxbhTS3Gt2zz6VEizkp6WyRXn8RdBtH"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-48</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">223</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">75</span><span class="p">,</span><span class="mi">185</span><span class="p">,</span><span class="mi">186</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">47</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">247</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">183</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">72</span><span class="p">,</span><span class="mi">49</span><span class="p">,</span><span class="mi">233</span><span class="p">,</span><span class="mi">62</span><span class="p">,</span><span class="mi">65</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">172</span><span class="p">,</span><span class="mi">109</span><span class="p">,</span><span class="mi">51</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-06T08:49:19.3717723+08:00"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_rsmc_temp_address_pub_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03080445b531e1df053ce9f1e3d01cdf679f693b23a991ce74145cb0b2e29a2b2d"</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> 
        </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9491ad7b9ff1003d6404b6f60845dfb0423d6233f42a3dbe118650c6c0e10232"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Bob&#39;s temp address data for create commitment transactions:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>Bob RSMC 
address  mimQmQxqBVSCbUjVEir5d9Fi9ij9jqPEdP
privkey cRNxX8S287DA1hkMZHVwnQiMdQVwBBdqpaGYDP1wrRdzT7pSm5kU
pubkey 02a08635fb1c664aa2bc1a87e76f8dc0b3170c0d45d0f899b3f192093afa1bcd8c
</code></pre>
<blockquote>
<p>Bob replies and create BR &amp; a newer commitment transactions:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-49</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"request_close_htlc_hash"</span><span class="p">:</span><span class="s2">"9491ad7b9ff1003d6404b6f60845dfb0423d6233f42a3dbe118650c6c0e10232"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_address_private_key"</span><span class="p">:</span><span class="s2">"cTr7SHQ7FR6Ej8ZU8vDpbt3y9GuF3hnBqn81Tv9Tdi5TeakqKavt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_rsmc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cTMZ3csaDWvods2jnMkNJZpz98DRWmFQXb4C1vDFTibcST5g3SNb"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_htlc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cTeQ2e9Hw6y1RHjCCF9x3MR7pn3yPySgxSYy5rtvmVvM7ZNh9jUZ"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_htlc_temp_address_for_htnx_private_key"</span><span class="p">:</span><span class="s2">"cUoDGr5cdNarcv43YXFdXBY2zf9721y6u6MiDnk56TSJWCGKvTbL"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_pub_key"</span><span class="p">:</span><span class="s2">"02a08635fb1c664aa2bc1a87e76f8dc0b3170c0d45d0f899b3f192093afa1bcd8c"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_rsmc_temp_address_private_key"</span><span class="p">:</span><span class="s2">"cRNxX8S287DA1hkMZHVwnQiMdQVwBBdqpaGYDP1wrRdzT7pSm5kU"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-49</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"close htlc success"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p>For continue using OBD to transfer assets OR some reasons
Alice need to close this HTLC channel between she and Bob.
Then Alice launch the closing request.</p>

<p><em>Alice (launcher) request to close HTLC of A2B channel</em></p>

<p><strong>Message Type: -48</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td>Id of a channel</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_rsmc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_htlc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_htlc_temp_address_for_htnx_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td>Id of a channel</td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td>time of created</td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td>creator</td>
</tr>
<tr>
<td>curr_rsmc_temp_address_pub_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>

<p><br/></p>

<p>Bob agree the closing request, and create BR (Breach Remedy)
&amp; a newer commitment transactions (known as Cxa or Cxb).</p>

<p><em>Bob replies</em></p>

<p><strong>Message Type: -49</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>request_close_htlc_hash</td>
<td>-------</td>
<td>data</td>
<td>hash of this closing request</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_rsmc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_htlc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_htlc_temp_address_for_htnx_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>msg</td>
<td>-------</td>
<td>result</td>
<td>success or failed</td>
</tr>
</tbody></table>

<p><br/></p>

<p>For continue using OBD to transfer assets OR some reasons
Carol need to close this HTLC channel between she and Bob.
Then Carol launch the closing request.</p>

<p><em>Carol (destination) request to close HTLC of B2C channel</em></p>

<p><strong>Message Type: -48</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td>Id of a channel</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_rsmc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_htlc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_htlc_temp_address_for_htnx_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td>Id of a channel</td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td>time of created</td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td>creator</td>
</tr>
<tr>
<td>curr_rsmc_temp_address_pub_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td>hash of this HTLC request</td>
</tr>
</tbody></table>

<p><br/></p>

<p>Bob agree the closing request, and create BR (Breach Remedy)
&amp; a newer commitment transactions (known as Cxa or Cxb).</p>

<p><em>Bob replies</em></p>

<p><strong>Message Type: -49</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>request_close_htlc_hash</td>
<td>-------</td>
<td>data</td>
<td>hash of this closing request</td>
</tr>
<tr>
<td>channel_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_rsmc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_htlc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>last_htlc_temp_address_for_htnx_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_pub_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
<tr>
<td>curr_rsmc_temp_address_private_key</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>msg</td>
<td>-------</td>
<td>result</td>
<td>success or failed</td>
</tr>
</tbody></table>

<!-- 十二、关闭HTLC状态下的通道 -->
<h1 id='query'>Query</h1>
<p>This section collects all the messages used in querying the latest status of the channel, as well as specific transactions and their status. Each party may use this tool set to surveil the behavior of his counterparty. </p>
<h2 id='query-list-of-commitment-transactions'>Query list of commitment transactions</h2>
<!-- right -->

<blockquote>
<p>either Alice or Bob:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
        <span class="s2">"type"</span>: -35101,
        <span class="s2">"data"</span>:<span class="o">{</span>
            <span class="s2">"channel_id"</span>:[59,253,135,228,203,197,78,61,223,84,135,17,136,165,253,7,69,70,182,254,95,86,78,118,149,122,33,222,129,249,52,197]
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-35101</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:[{</span><span class="w">
        </span><span class="s2">"amount_b"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount_m"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">59</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">228</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">223</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">136</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">69</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">182</span><span class="p">,</span><span class="mi">254</span><span class="p">,</span><span class="mi">95</span><span class="p">,</span><span class="mi">86</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">122</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">129</span><span class="p">,</span><span class="mi">249</span><span class="p">,</span><span class="mi">52</span><span class="p">,</span><span class="mi">197</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="s2">"2019-09-21T01:01:54.262628+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_hash"</span><span class="p">:</span><span class="s2">"8a55f150c34e2720a587dde3809e81959701e1dd3f78c1e1fc9960c132566fe0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="s2">"input_amount"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"input_txid"</span><span class="p">:</span><span class="s2">"c734f981de217a95764e565ffeb6464507fda588118754df3d4ec5cbe487fd3b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"input_vout"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_commitment_tx_id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_edit_time"</span><span class="p">:</span><span class="s2">"2019-09-21T01:01:54.262628+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_hash"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"multi_address"</span><span class="p">:</span><span class="s2">"2N3zxWFsT2nocWPiM7Qpc8rngQDv7PEX6yz"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="mi">121</span><span class="p">,</span><span class="w">
        </span><span class="s2">"redeem_script"</span><span class="p">:</span><span class="s2">"522103ea01f8b137df5744ec2b0b91bc46139cabf228403264df65f6233bd7f0cbd17d2103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952ae"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"script_pub_key"</span><span class="p">:</span><span class="s2">"a91475f6a2aa9461985bed4b847104ca81b73cf2f1ac87"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"send_at"</span><span class="p">:</span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sign_at"</span><span class="p">:</span><span class="s2">"2019-09-21T01:01:54.704956+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"temp_address_pub_key"</span><span class="p">:</span><span class="s2">"03ea01f8b137df5744ec2b0b91bc46139cabf228403264df65f6233bd7f0cbd17d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transaction_sign_hex_to_other"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transaction_sign_hex_to_temp_multi_address"</span><span class="p">:</span><span class="s2">"0200000001685a7e84bc2d24fa01550674176a6b4bf366a99e001b5b52f2fc16c8b6146b2600000000d900473044022008df14db1d40c4c53dbf87903ed3604e6075a80d96c8efbdc0899218c813d1df02203dde10f2139286ba4a533ea28f3b25c1394a359e1bf7db0a8b4245981a2aab3b014730440220194ed787685360c7c3b1dc67328db680e8e8d9e201753550c585efcf355beee1022023bf97e53ae59110f0c5f4160a2df723747ba61d65db5d6af7cc93ba70cc5ace01475221021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d2103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952aeffffffff033c1900000000000017a91475f6a2aa9461985bed4b847104ca81b73cf2f1ac870000000000000000166a146f6d6e6900000000000000790000000023c346001c0200000000000017a91475f6a2aa9461985bed4b847104ca81b73cf2f1ac8700000000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"txid_to_other"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"txid_to_temp_multi_address"</span><span class="p">:</span><span class="s2">"8656156b4e70670745f0f9e46b64a84c7366bbad3182ebf135b6a5b60f10b1f1"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<!-- center -->

<p>What is this message really querying about? The latest channel status?</p>

<p><strong>Message Type: -35101</strong></p>

<p><strong>Either Alice or Bob Requests:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>amount_m</td>
<td>-------</td>
<td>result</td>
<td>total tokens in this channel</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>curr_hash</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>input_amount</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>input_txid</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>input_vout</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>last_commitment_tx_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>last_edit_time</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>last_hash</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>multi_address</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>owner</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_a</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_b</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>redeem_script</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>script_pub_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>send_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>sign_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>temp_address_pub_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>transaction_sign_hex_to_other</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>transaction_sign_hex_to_temp_multi_address</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>txid_to_other</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>txid_to_temp_multi_address</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>
<h2 id='latest-commitment-transaction'>Latest commitment transaction</h2>
<!-- right -->

<blockquote>
<p>Either Alice or Bob can query: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>: -35104,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"channel_id"</span>:[59,253,135,228,203,197,78,61,223,84,135,17,136,165,253,7,69,70,182,254,95,86,78,118,149,122,33,222,129,249,52,197]
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<blockquote>
<p>OBD Responses：</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-35104</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"amount_b"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount_m"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">59</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">228</span><span class="p">,</span><span class="mi">203</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span><span class="mi">223</span><span class="p">,</span><span class="mi">84</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">136</span><span class="p">,</span><span class="mi">165</span><span class="p">,</span><span class="mi">253</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">69</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">182</span><span class="p">,</span><span class="mi">254</span><span class="p">,</span><span class="mi">95</span><span class="p">,</span><span class="mi">86</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">118</span><span class="p">,</span><span class="mi">149</span><span class="p">,</span><span class="mi">122</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">222</span><span class="p">,</span><span class="mi">129</span><span class="p">,</span><span class="mi">249</span><span class="p">,</span><span class="mi">52</span><span class="p">,</span><span class="mi">197</span><span class="p">],</span><span class="w">
        </span><span class="s2">"create_at"</span><span class="p">:</span><span class="s2">"2019-09-21T01:01:54.262628+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"create_by"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_hash"</span><span class="p">:</span><span class="s2">"8a55f150c34e2720a587dde3809e81959701e1dd3f78c1e1fc9960c132566fe0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="s2">"input_amount"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"input_txid"</span><span class="p">:</span><span class="s2">"c734f981de217a95764e565ffeb6464507fda588118754df3d4ec5cbe487fd3b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"input_vout"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_commitment_tx_id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_edit_time"</span><span class="p">:</span><span class="s2">"2019-09-21T01:01:54.262628+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_hash"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"multi_address"</span><span class="p">:</span><span class="s2">"2N3zxWFsT2nocWPiM7Qpc8rngQDv7PEX6yz"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"owner"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peer_id_a"</span><span class="p">:</span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"peer_id_b"</span><span class="p">:</span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"property_id"</span><span class="p">:</span><span class="mi">121</span><span class="p">,</span><span class="w">
        </span><span class="s2">"redeem_script"</span><span class="p">:</span><span class="s2">"522103ea01f8b137df5744ec2b0b91bc46139cabf228403264df65f6233bd7f0cbd17d2103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952ae"</span><span class="p">,</span><span class="s2">"script_pub_key"</span><span class="p">:</span><span class="s2">"a91475f6a2aa9461985bed4b847104ca81b73cf2f1ac87"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"send_at"</span><span class="p">:</span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sign_at"</span><span class="p">:</span><span class="s2">"2019-09-21T01:01:54.704956+08:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"temp_address_pub_key"</span><span class="p">:</span><span class="s2">"03ea01f8b137df5744ec2b0b91bc46139cabf228403264df65f6233bd7f0cbd17d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transaction_sign_hex_to_other"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transaction_sign_hex_to_temp_multi_address"</span><span class="p">:</span><span class="s2">"0200000001685a7e84bc2d24fa01550674176a6b4bf366a99e001b5b52f2fc16c8b6146b2600000000d900473044022008df14db1d40c4c53dbf87903ed3604e6075a80d96c8efbdc0899218c813d1df02203dde10f2139286ba4a533ea28f3b25c1394a359e1bf7db0a8b4245981a2aab3b014730440220194ed787685360c7c3b1dc67328db680e8e8d9e201753550c585efcf355beee1022023bf97e53ae59110f0c5f4160a2df723747ba61d65db5d6af7cc93ba70cc5ace01475221021d475729c52f86df24b36aa231945bd090f9c23ccbfb91e4ade6813b2419d32d2103efd8923f1829ece87202892d31cd75c20b7a7b5adf888f7ba04fa2c1bc931ce952aeffffffff033c1900000000000017a91475f6a2aa9461985bed4b847104ca81b73cf2f1ac870000000000000000166a146f6d6e6900000000000000790000000023c346001c0200000000000017a91475f6a2aa9461985bed4b847104ca81b73cf2f1ac8700000000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"txid_to_other"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"txid_to_temp_multi_address"</span><span class="p">:</span><span class="s2">"8656156b4e70670745f0f9e46b64a84c7366bbad3182ebf135b6a5b60f10b1f1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<!-- center -->

<p><strong>Message Type: -35104</strong></p>

<p><strong>Either Alice or Bob can query:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>peer id of funder</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>peer id of fundee</td>
</tr>
<tr>
<td>amount_b</td>
<td>-------</td>
<td>result</td>
<td>none required</td>
</tr>
<tr>
<td>amount_m</td>
<td>-------</td>
<td>result</td>
<td>how much has been funded</td>
</tr>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td>created by the funder</td>
</tr>
<tr>
<td>curr_hash</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>input_amount</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>input_txid</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>input_vout</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>last_commitment_tx_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>last_edit_time</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>last_hash</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>multi_address</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>owner</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_a</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>peer_id_b</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>redeem_script</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>script_pub_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>send_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>sign_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>temp_address_pub_key</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>transaction_sign_hex_to_other</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>transaction_sign_hex_to_temp_multi_address</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>txid_to_other</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>txid_to_temp_multi_address</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>
<h2 id='latest-revockable-delivery-transaction'>Latest Revockable Delivery Transaction</h2>
<!-- right -->

<blockquote>
<p>Either Alice or Bob can query: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>: -35105,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"channel_id"</span>:[59,253,135,228,203,197,78,61,223,84,135,17,136,165,253,7,69,70,182,254,95,86,78,118,149,122,33,222,129,249,52,197]
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<!-- center -->

<p><strong>Message Type: -35105</strong></p>

<p><strong>Either Alice or Bob can query:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>
<h2 id='latest-breach-remedy-transaction'>Latest Breach Remedy Transaction</h2>
<!-- right -->

<blockquote>
<p>Either Alice or Bob can query: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>: -35106,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"channel_id"</span>:[59,253,135,228,203,197,78,61,223,84,135,17,136,165,253,7,69,70,182,254,95,86,78,118,149,122,33,222,129,249,52,197]
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<!-- center -->

<p><strong>Message Type: -35106</strong></p>

<p><strong>Either Alice or Bob can query:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>
<h2 id='list-all-revockable-delivery-transactions'>List all Revockable Delivery Transactions</h2>
<!-- right -->

<blockquote>
<p>Either Alice or Bob can query: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>: -35108,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"channel_id"</span>:[59,253,135,228,203,197,78,61,223,84,135,17,136,165,253,7,69,70,182,254,95,86,78,118,149,122,33,222,129,249,52,197]
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<!-- center -->

<p><strong>Message Type: -35108</strong></p>

<p><strong>Either Alice or Bob can query:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>
<h2 id='list-all-breach-remedy-transactions'>List all Breach Remedy Transactions</h2>
<!-- right -->

<blockquote>
<p>Either Alice or Bob can query: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>: -35109,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"channel_id"</span>:[59,253,135,228,203,197,78,61,223,84,135,17,136,165,253,7,69,70,182,254,95,86,78,118,149,122,33,222,129,249,52,197]
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<!-- center -->

<p><strong>Message Type: -35109</strong></p>

<p><strong>Either Alice or Bob can query:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>
<h2 id='list-all-channels'>List all Channels</h2>
<!-- right -->

<blockquote>
<p>Either Alice or Bob can query: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>: -3202, 
<span class="o">}</span>
</code></pre>
<!-- center -->

<p><strong>Message Type: -3202</strong></p>

<p><strong>Either Alice or Bob can fetch the list of all channels</strong></p>

<p>This message has no arguments.</p>
<h2 id='list-all-commitment-transactions-broadcasted'>List all Commitment Transactions Broadcasted</h2>
<!-- right -->

<blockquote>
<p>Either Alice or Bob can query: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>: -35110,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"channel_id"</span>:[59,253,135,228,203,197,78,61,223,84,135,17,136,165,253,7,69,70,182,254,95,86,78,118,149,122,33,222,129,249,52,197]
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<!-- center -->

<p><strong>Message Type: -35110</strong></p>

<p><strong>Either Alice or Bob can query:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>
<h2 id='list-all-commitment-transactions-broadcasted-2'>List all Commitment Transactions Broadcasted</h2>
<!-- right -->

<blockquote>
<p>Either Alice or Bob can query: </p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"type"</span>: -35110,
    <span class="s2">"data"</span>:<span class="o">{</span>
        <span class="s2">"channel_id"</span>:[59,253,135,228,203,197,78,61,223,84,135,17,136,165,253,7,69,70,182,254,95,86,78,118,149,122,33,222,129,249,52,197]
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<!-- center -->

<p><strong>Message Type: -35110</strong></p>

<p><strong>Either Alice or Bob can query:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>

<!-- Added by Kevin 2019-11-6 -->
<h2 id='get-htlc-base-data-and-the-h-hash_preimage_r'>Get HTLC base data and the H (Hash_Preimage_R)</h2>
<!-- right -->

<blockquote>
<p>Only HTLC creator can query: </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-4001</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><strong>Message Type: -4001</strong></p>

<p><strong>Only HTLC creator can query:</strong></p>

<p>This message has no arguments.</p>
<h2 id='get-htlc-base-data-and-the-r-preimage_r'>Get HTLC base data and the R (Preimage_R)</h2>
<!-- right -->

<blockquote>
<p>Only HTLC Receiever can query: </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-4101</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-4101</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T15:02:25.2004375+08:00"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"create_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"83519233492eb05ddd547757f2c3d151ad9392b2ebf48fc1a88e07e61dd82a45"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"r"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2de142c8006a3462241e96a610b59f3d92d8259c"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"recipient_peer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"742db9677d53316b8faef7c9f40766e4f39dd6b82487c103960e9170de8ce636"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"sender_peer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"sign_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-04T15:08:31.5417759+08:00"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"sign_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="w">
        </span><span class="p">},</span><span class="w"> 
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-06T08:02:50.8302374+08:00"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"create_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"curr_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"h"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e7626f2b7207006d6515399c587c09c3bfb5ed3b12f63c12b0d40e634f9dd9a3"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"property_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"r"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2de142c8006a3462241e96a610b59f3d92d8259c"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"recipient_peer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"request_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1fe82bc9152741670c4ee2b4853df9346c1cc63fce6d1c896e7eeca8cc62c9d9"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"sender_peer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"sign_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-11-06T08:03:41.3545586+08:00"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"sign_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><strong>Message Type: -4101</strong></p>

<p><strong>Only HTLC Receiever can query:</strong></p>

<p>This message has no arguments.</p>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>amount</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>create_by</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>curr_state</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>h</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>property_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>r</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>recipient_peer_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>request_hash</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>sender_peer_id</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>sign_at</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
<tr>
<td>sign_by</td>
<td>-------</td>
<td>result</td>
<td></td>
</tr>
</tbody></table>
<h2 id='the-middleman-node-get-the-r-preimage_r-by-channel-id'>The middleman node get the R (Preimage_R) by channel id</h2>
<!-- right -->

<blockquote>
<p>Only middleman node can query: </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-4103</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{</span><span class="w">
        </span><span class="s2">"channel_id"</span><span class="p">:[</span><span class="mi">223</span><span class="p">,</span><span class="mi">177</span><span class="p">,</span><span class="mi">75</span><span class="p">,</span><span class="mi">185</span><span class="p">,</span><span class="mi">186</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">47</span><span class="p">,</span><span class="mi">155</span><span class="p">,</span><span class="mi">145</span><span class="p">,</span><span class="mi">238</span><span class="p">,</span><span class="mi">242</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">158</span><span class="p">,</span><span class="mi">247</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">183</span><span class="p">,</span><span class="mi">197</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">190</span><span class="p">,</span><span class="mi">72</span><span class="p">,</span><span class="mi">49</span><span class="p">,</span><span class="mi">233</span><span class="p">,</span><span class="mi">62</span><span class="p">,</span><span class="mi">65</span><span class="p">,</span><span class="mi">156</span><span class="p">,</span><span class="mi">103</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">172</span><span class="p">,</span><span class="mi">109</span><span class="p">,</span><span class="mi">51</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><strong>Message Type: -4103</strong></p>

<p><strong>Only middleman node can query:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channel_id</td>
<td>-------</td>
<td>data</td>
<td></td>
</tr>
</tbody></table>
<h2 id='htlc-receiever-get-the-r-by-h'>HTLC Receiever get the R by H</h2>
<!-- right -->

<blockquote>
<p>HTLC Receiever can query: </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="mi">-4105</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="s2">"e7626f2b7207006d6515399c587c09c3bfb5ed3b12f63c12b0d40e634f9dd9a3"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>OBD Responses:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">-4105</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carol"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"</span><span class="se">\"</span><span class="s2">2de142c8006a3462241e96a610b59f3d92d8259c</span><span class="se">\"</span><span class="s2">"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<!-- center -->

<p><strong>Message Type: -4105</strong></p>

<p><strong>HTLC Receiever can query:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>H</td>
<td>-------</td>
<td>data</td>
<td>Hash_Preimage_R</td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>OBD Responses:</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>default</th>
<th>placement</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>-------</td>
<td>body</td>
<td>true or false</td>
</tr>
<tr>
<td>from</td>
<td>-------</td>
<td>body</td>
<td>sender</td>
</tr>
<tr>
<td>to</td>
<td>-------</td>
<td>body</td>
<td>receiever</td>
</tr>
<tr>
<td>string</td>
<td>-------</td>
<td>result</td>
<td>result</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="golang">golang</a>
          </div>
      </div>
    </div>
  </body>
</html>
